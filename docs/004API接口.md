# 接口设计 （需要大修）

采用 RESTful 风格 API 设计，所有接口返回统一格式：

```json
{
  "code": 200, // 状态码：200成功，其他为错误
  "message": "success", // 消息描述
  "data": {} // 业务数据
}
```

## 1. 用户管理接口

| 接口                     | 方法   | 描述                                                                | 请求参数                                | 响应数据                                 |
| ------------------------ | ------ | ------------------------------------------------------------------- | --------------------------------------- | ---------------------------------------- |
| `/api/auth/register`     | POST   | 用户注册                                                            | `{username, password, confirmPassword}` | `{userId, username, token}`              |
| `/api/auth/login`        | POST   | 用户登录                                                            | `{username, password}`                  | `{userId, username, token, totalPoints}` |
| `/api/auth/logout`       | POST   | 用户登出                                                            | `{}`（需 token）                        | `{success: true}`                        |
| `/api/auth/changepwd`    | POST   | 修改密码｜`{oldPassword, newPassword, confirmPassword}`（需 token） | `{success: true}`                       |
| `/api/auth/delete`       | DELETE | 注销账号                                                            | `{}`（需 token）                        | `{success: true}`                        |
| `/api/auth/user/profile` | GET    | 获取个人信息                                                        | 无（需 token）                          | `{userId, username, totalPoints, ...}`   |

## 2. 签到接口

| 接口                   | 方法 | 描述         | 请求参数                   | 响应数据                                                      |
| ---------------------- | ---- | ------------ | -------------------------- | ------------------------------------------------------------- |
| `/api/checkin`         | POST | 执行签到     | 无（需 token）             | `{day, points, surprise, totalPoints}`                        |
| `/api/checkin/cycle`   | GET  | 获取当前周期 | 无（需 token）             | `{cycleId, startDate, endDate, days: [], checkinRecords: []}` |
| `/api/checkin/history` | GET  | 获取签到历史 | `{page, size}`（需 token） | `{records: [], total, page, size}`                            |

## 3. 组队接口

| 接口               | 方法 | 描述     | 请求参数                 | 响应数据                                       |
| ------------------ | ---- | -------- | ------------------------ | ---------------------------------------------- |
| `/api/teams`       | POST | 创建组队 | 无（需 token）           | `{teamId, teamCode, expireTime}`               |
| `/api/teams/join`  | POST | 加入组队 | `{teamCode}`（需 token） | `{teamId, status, memberCount}`                |
| `/api/teams/my`    | GET  | 我的组队 | 无（需 token）           | `{teams: []}`                                  |
| `/api/teams/:code` | GET  | 组队详情 | 无（需 token）           | `{teamId, teamCode, status, members: [], ...}` |

## 4. 兑换接口

| 接口                              | 方法 | 描述         | 请求参数                   | 响应数据                                          |
| --------------------------------- | ---- | ------------ | -------------------------- | ------------------------------------------------- |
| `/api/products`                   | GET  | 获取商品列表 | 无                         | `{products: []}`                                  |
| `/api/products/exchanges`         | POST | 兑换商品     | `{productId}`（需 token）  | `{exchangeId, productName, points, remainPoints}` |
| `/api/products/exchanges/history` | GET  | 兑换记录     | `{page, size}`（需 token） | `{records: [], total, page, size}`                |

## 5. 朴分记录接口

| 接口                   | 方法 | 描述     | 请求参数                         | 响应数据                           |
| ---------------------- | ---- | -------- | -------------------------------- | ---------------------------------- |
| `/api/points/records`  | GET  | 朴分记录 | `{page, size, type}`（需 token） | `{records: [], total, page, size}` |
| `/api/points/expiring` | GET  | 即将过期 | 无（需 token）                   | `{points, expireDate}`             |

## 6. 管理接口

| 接口               | 方法 | 描述         | 请求参数      | 响应数据                        |
| ------------------ | ---- | ------------ | ------------- | ------------------------------- |
| `/api/admin/time`  | POST | 设置系统时间 | `{timestamp}` | `{success: true, currentTime}`  |
| `/api/admin/stats` | GET  | 系统统计     | 无            | `{userCount, totalPoints, ...}` |
