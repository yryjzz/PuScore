# PuScore æœ´åˆ†ç³»ç»Ÿ - å·²å®ŒæˆåŠŸèƒ½ä¸ API æ¥å£æ–‡æ¡£

**é¡¹ç›®ç‰ˆæœ¬**: v1.7.0  
**æ›´æ–°æ—¶é—´**: 2025 å¹´ 9 æœˆ 30 æ—¥  
**å¼€å‘çŠ¶æ€**: è¿›è¡Œä¸­ - ç”¨æˆ·ç»„é˜Ÿè®°å½•åŠŸèƒ½å·²å®Œæˆ ğŸ†•

## ğŸ“‹ é¡¹ç›®æ¦‚è§ˆ

PuScore æœ´åˆ†ç³»ç»Ÿæ˜¯ä¸€ä¸ªç”¨æˆ·ç§¯åˆ†ç®¡ç†ç³»ç»Ÿï¼Œæä¾›ç­¾åˆ°è·å¾—ç§¯åˆ†ã€ç§¯åˆ†å…‘æ¢å•†å“åˆ¸ã€ç»„é˜ŸåŠŸèƒ½ç­‰æ ¸å¿ƒä¸šåŠ¡ã€‚ç³»ç»Ÿé‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œåç«¯åŸºäº Node.js + Fastify + SQLite + Sequelize æ„å»ºã€‚

### æŠ€æœ¯æ ˆ

- **åç«¯æ¡†æ¶**: Fastify v5.6.1
- **æ•°æ®åº“**: SQLite 3 + Se### 2. ç®¡ç†å‘˜æ¥å£ (/api/admin/\*) - ä»…å¼€å‘ç¯å¢ƒ

| æ¥å£è·¯å¾„                        | æ–¹æ³•   | åŠŸèƒ½æè¿°         | çŠ¶æ€      |
| ------------------------------- | ------ | ---------------- | --------- |
| `/api/admin/time`               | POST   | è®¾ç½®ç³»ç»Ÿæ—¶é—´     | âœ… å·²å®Œæˆ |
| `/api/admin/time`               | GET    | è·å–æ—¶é—´çŠ¶æ€     | âœ… å·²å®Œæˆ |
| `/api/admin/time`               | DELETE | é‡ç½®ç³»ç»Ÿæ—¶é—´     | âœ… å·²å®Œæˆ |
| `/api/admin/stats`              | GET    | ç³»ç»Ÿç»Ÿè®¡ä¿¡æ¯     | âœ… å·²å®Œæˆ |
| `/api/admin/info`               | GET    | å¼€å‘ç¯å¢ƒä¿¡æ¯     | âœ… å·²å®Œæˆ |
| `/api/admin/checkin/generate`   | POST   | æ‰‹åŠ¨ç”Ÿæˆç­¾åˆ°é…ç½® | âœ… å·²å®Œæˆ |
| `/api/admin/checkin/cycles`     | GET    | æŸ¥è¯¢ç­¾åˆ°å‘¨æœŸåˆ—è¡¨ | âœ… å·²å®Œæˆ |
| `/api/admin/checkin/current`    | GET    | æŸ¥è¯¢å½“å‰å‘¨é…ç½®   | âœ… å·²å®Œæˆ |
| `/api/admin/checkin/cycles/:id` | GET    | æŸ¥çœ‹é…ç½®è¯¦æƒ…     | âœ… å·²å®Œæˆ |
| `/api/admin/checkin/products`   | GET    | æŸ¥çœ‹å•†å“åˆ¸åˆ—è¡¨   | âœ… å·²å®Œæˆ |
| `/api/admin/point/expire`       | POST   | æ‰‹åŠ¨æ‰§è¡Œæœ´åˆ†è¿‡æœŸ | âœ… å·²å®Œæˆ |
| `/api/admin/point/expire-check` | GET    | æ£€æŸ¥è¿‡æœŸæ—¥æœŸ     | âœ… å·²å®Œæˆ |

### 3. æœ´åˆ†ç›¸å…³æ¥å£ (/api/point/\*)

| æ¥å£è·¯å¾„             | æ–¹æ³• | åŠŸèƒ½æè¿°     | è®¤è¯éœ€æ±‚      | çŠ¶æ€      |
| -------------------- | ---- | ------------ | ------------- | --------- |
| `/api/point/checkin` | POST | ç”¨æˆ·ç­¾åˆ°     | âœ… éœ€è¦ Token | âœ… å·²å®Œæˆ |
| `/api/point/records` | GET  | è·å–æœ´åˆ†è®°å½• | âœ… éœ€è¦ Token | âœ… å·²å®Œæˆ |

### 4. å•†å“å…‘æ¢æ¥å£ (/api/product/\*)

| æ¥å£è·¯å¾„                    | æ–¹æ³• | åŠŸèƒ½æè¿°         | è®¤è¯éœ€æ±‚      | çŠ¶æ€      |
| --------------------------- | ---- | ---------------- | ------------- | --------- |
| `/api/product/exchangeable` | GET  | è·å–å¯å…‘æ¢å•†å“åˆ¸ | âœ… éœ€è¦ Token | âœ… å·²å®Œæˆ |
| `/api/product/exchange`     | POST | å…‘æ¢å•†å“åˆ¸       | âœ… éœ€è¦ Token | âœ… å·²å®Œæˆ |
| `/api/product/exchanges`    | GET  | è·å–å…‘æ¢è®°å½•     | âœ… éœ€è¦ Token | âœ… å·²å®Œæˆ |

### 5. ç»„é˜ŸåŠŸèƒ½æ¥å£ (/api/team/\*)

| æ¥å£è·¯å¾„                             | æ–¹æ³• | åŠŸèƒ½æè¿°               | è®¤è¯éœ€æ±‚      | çŠ¶æ€      |
| ------------------------------------ | ---- | ---------------------- | ------------- | --------- |
| `/api/team/check-created-today`      | GET  | æ£€æŸ¥ä»Šæ—¥æ˜¯å¦å·²åˆ›å»ºç»„é˜Ÿ | âœ… éœ€è¦ Token | âœ… å·²å®Œæˆ |
| `/api/team/check-joined-today`       | GET  | æ£€æŸ¥ä»Šæ—¥æ˜¯å¦å·²å‚ä¸ç»„é˜Ÿ | âœ… éœ€è¦ Token | âœ… å·²å®Œæˆ |
| `/api/team/:team_code/check-expired` | GET  | æ£€æŸ¥ç»„é˜Ÿè¿‡æœŸçŠ¶æ€       | âŒ ä¸éœ€è¦     | âœ… å·²å®Œæˆ |
| `/api/team/create`                   | POST | é˜Ÿé•¿åˆ›å»ºç»„é˜Ÿ           | âœ… éœ€è¦ Token | âœ… å·²å®Œæˆ |
| `/api/team/join`                     | POST | é˜Ÿå‘˜åŠ å…¥ç»„é˜Ÿ           | âœ… éœ€è¦ Token | âœ… å·²å®Œæˆ |
| `/api/team/records`                  | GET  | è·å–ç”¨æˆ·ç»„é˜Ÿè®°å½•       | âœ… éœ€è¦ Token | âœ… å·²å®Œæˆ |
| `/api/team/:team_code`               | GET  | è·å–ç»„é˜Ÿè¯¦æƒ…           | âŒ ä¸éœ€è¦     | âœ… å·²å®Œæˆ |

**ğŸ‰ å›¢é˜Ÿå¥–åŠ±åŠŸèƒ½ç‰¹ç‚¹**ï¼š

- æ··åˆå­—ç¬¦å›¢é˜Ÿç ï¼š8 ä½æ··åˆå­—ç¬¦ï¼ˆæ•°å­—+å¤§å°å†™å­—æ¯ï¼‰
- è‡ªåŠ¨å¥–åŠ±åˆ†å‘ï¼šå›¢é˜Ÿè¾¾åˆ° 4 äººæ—¶è‡ªåŠ¨è§¦å‘
- å¥–åŠ±è§„åˆ™ï¼šé˜Ÿé•¿è·å¾— 70 æœ´åˆ†ï¼Œé˜Ÿå‘˜å„è·å¾— 10 æœ´åˆ†
- å®Œæ•´è®°å½•ï¼šæ‰€æœ‰å¥–åŠ±å˜åŠ¨è®°å½•åœ¨æœ´åˆ†è®°å½•è¡¨ä¸­

### 6. ç³»ç»Ÿæ¥å£

| æ¥å£è·¯å¾„      | æ–¹æ³• | åŠŸèƒ½æè¿° | çŠ¶æ€      |
| ------------- | ---- | -------- | --------- |
| `/api/health` | GET  | å¥åº·æ£€æŸ¥ | âœ… å·²å®Œæˆ |

- **å®šæ—¶ä»»åŠ¡**: node-cron
- **å¯†ç åŠ å¯†**: bcrypt
- **å¼€å‘å·¥å…·**: nodemon, dotenv

## ğŸ¯ å·²å®ŒæˆåŠŸèƒ½

### âœ… 1. ç”¨æˆ·è®¤è¯åŠŸèƒ½ (å·²å®Œæˆ)

- [x] ç”¨æˆ·æ³¨å†Œ - ç”¨æˆ·åå”¯ä¸€æ€§éªŒè¯ï¼Œå¯†ç ç¡®è®¤
- [x] ç”¨æˆ·ç™»å½• - JWT Token ç”Ÿæˆï¼Œç”¨æˆ·çŠ¶æ€éªŒè¯
- [x] ç”¨æˆ·ç™»å‡º - Token å¤±æ•ˆå¤„ç†
- [x] ä¿®æ”¹å¯†ç  - æ—§å¯†ç éªŒè¯ï¼Œæ–°å¯†ç è®¾ç½®
- [x] æ³¨é”€è´¦å· - è½¯åˆ é™¤ï¼ŒçŠ¶æ€æ ‡è®°
- [x] è·å–ä¸ªäººä¿¡æ¯ - ç”¨æˆ·èµ„æ–™ã€æœ´åˆ†ä½™é¢æŸ¥è¯¢

### âœ… 2. æ—¶é—´æ§åˆ¶ç³»ç»Ÿ (å·²å®Œæˆ)

- [x] ç³»ç»Ÿæ—¶é—´è®¾ç½® - æ”¯æŒæ—¶é—´æˆ³ã€æ—¥æœŸå­—ç¬¦ä¸²ã€æ—¶é—´å¿«è¿›
- [x] æ—¶é—´çŠ¶æ€æŸ¥è¯¢ - è·å–å½“å‰ç³»ç»Ÿæ—¶é—´çŠ¶æ€
- [x] æ—¶é—´é‡ç½® - æ¢å¤çœŸå®æ—¶é—´
- [x] æ—¶é—´ç»Ÿè®¡ - ç³»ç»Ÿè¿è¡Œæ—¶é—´ã€å†…å­˜ä½¿ç”¨ç­‰

### âœ… 3. ç­¾åˆ°å‘¨æœŸç”Ÿæˆç³»ç»Ÿ (å·²å®Œæˆ)

- [x] å•†å“åˆ¸æ¨¡å‹ - æ”¯æŒå¯å…‘æ¢ã€ç­¾åˆ°ä¸“ç”¨ã€å·²ä¸‹æ¶çŠ¶æ€
- [x] ç­¾åˆ°å‘¨æœŸè¡¨ - æ¯å‘¨ä¸€è‡ªåŠ¨ç”Ÿæˆ 5 ä¸ªä¸åŒç­¾åˆ°é…ç½®
- [x] ç­¾åˆ°é…ç½®ç”Ÿæˆ - éšæœºæœ´åˆ†(5-25)ã€éšæœºæƒŠå–œ(1-3 å¤©)
- [x] æƒŠå–œå¥–åŠ±ç³»ç»Ÿ - æ”¯æŒå•†å“åˆ¸å’Œæ¦‚ç‡ç“œåˆ†ä¸¤ç§ç±»å‹
- [x] å®šæ—¶ä»»åŠ¡ - æ¯å‘¨ä¸€ 00:00 è‡ªåŠ¨ç”Ÿæˆæ–°å‘¨æœŸ
- [x] æ‰‹åŠ¨ç”Ÿæˆæ¥å£ - ç®¡ç†å‘˜å¯æ‰‹åŠ¨ç”ŸæˆæŒ‡å®šå‘¨æœŸ

### âœ… 4. æ•°æ®åº“æ¨¡å‹ (å·²å®Œæˆ)

- [x] ç”¨æˆ·è¡¨ (users) - ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ã€æœ´åˆ†ä½™é¢
- [x] å•†å“åˆ¸è¡¨ (products) - å•†å“ä¿¡æ¯ã€å…‘æ¢æœ´åˆ†ã€çŠ¶æ€ç®¡ç†
- [x] ç­¾åˆ°å‘¨æœŸè¡¨ (checkin_cycles) - å‘¨æœŸæ—¶é—´ã€JSON é…ç½®å­˜å‚¨
- [x] ç”¨æˆ·-ç­¾åˆ°å…³è”è¡¨ (user_checkin_configs) - ç”¨æˆ·ç­¾åˆ°é…ç½®åˆ†é…ä¸çŠ¶æ€è·Ÿè¸ª
- [x] æ•°æ®åº“åˆå§‹åŒ– - è‡ªåŠ¨åˆ›å»ºè¡¨ç»“æ„ã€åˆå§‹æ•°æ®å¡«å……
- [x] å¤–é”®çº¦æŸ - æ•°æ®å®Œæ•´æ€§ä¿éšœ
- [x] ç´¢å¼•ä¼˜åŒ– - æŸ¥è¯¢æ€§èƒ½æå‡

### âœ… 5. ç”¨æˆ·ç­¾åˆ°ä¿¡æ¯ç³»ç»Ÿ (å·²å®Œæˆ)

- [x] ç­¾åˆ°é…ç½®åˆ†é… - ç”¨æˆ·é¦–æ¬¡è·å–ç­¾åˆ°ä¿¡æ¯æ—¶è‡ªåŠ¨éšæœºåˆ†é…å½“å‰å‘¨é…ç½®
- [x] ç­¾åˆ°çŠ¶æ€è·Ÿè¸ª - è®°å½•ç”¨æˆ·æ¯å¤©çš„ç­¾åˆ°çŠ¶æ€(day1-day7)
- [x] ç­¾åˆ°ä¿¡æ¯ API - è·å–ç”¨æˆ·å®Œæ•´ç­¾åˆ°ä¿¡æ¯ï¼ŒåŒ…å«é…ç½®å’ŒçŠ¶æ€
- [x] ä»Šå¤©æ ‡è®° - è‡ªåŠ¨è¯†åˆ«å¹¶æ ‡è®°å½“å‰æ˜¯å‘¨å‡ 
- [x] æ—¶é—´å…¼å®¹ - æ”¯æŒæ—¶é—´æ§åˆ¶æœåŠ¡çš„è°ƒæ§æ—¶é—´

### âœ… 6. ç”¨æˆ·ç­¾åˆ°æ‰§è¡ŒåŠŸèƒ½ (å·²å®Œæˆ)

- [x] æœ´åˆ†è®°å½•è¡¨æ¨¡å‹ - åˆ›å»º`point_records`è¡¨ï¼Œæ”¯æŒå„ç±»æœ´åˆ†å˜åŠ¨è®°å½•
- [x] æœ´åˆ†æœåŠ¡å®ç° - å®Œæ•´çš„ç­¾åˆ°ä¸šåŠ¡é€»è¾‘å’Œæœ´åˆ†ç®¡ç†
- [x] ç­¾åˆ°æ‰§è¡Œæ¥å£ - `POST /api/point/checkin` å®Œæ•´ç­¾åˆ°æµç¨‹
- [x] æœ´åˆ†è®°å½•æŸ¥è¯¢ - `GET /api/point/records` æ”¯æŒåˆ†é¡µå’Œç­›é€‰
- [x] é‡å¤ç­¾åˆ°é˜²æŠ¤ - æ£€æŸ¥å½“æ—¥ç­¾åˆ°çŠ¶æ€ï¼Œé˜²æ­¢é‡å¤æ“ä½œ
- [x] æƒŠå–œå¥–åŠ±å¤„ç† - æ”¯æŒå•†å“åˆ¸å’Œæ¦‚ç‡ç“œåˆ†ä¸¤ç§æƒŠå–œå¥–åŠ±
- [x] äº‹åŠ¡å®‰å…¨ä¿éšœ - ä½¿ç”¨æ•°æ®åº“äº‹åŠ¡ç¡®ä¿æ•°æ®ä¸€è‡´æ€§
- [x] ç­¾åˆ°çŠ¶æ€åŒæ­¥ - å®æ—¶æ›´æ–°ç”¨æˆ·ç­¾åˆ°çŠ¶æ€åˆ°å…³è”è¡¨
- [x] å®Œæ•´æµ‹è¯•éªŒè¯ - æä¾›å®Œæ•´çš„ API æµ‹è¯•è„šæœ¬å’ŒéªŒè¯æµç¨‹

### âœ… 7. æœ´åˆ†è¿‡æœŸç®¡ç†åŠŸèƒ½ (å·²å®Œæˆ) ğŸ†•

- [x] æœ´åˆ†è¿‡æœŸä¸šåŠ¡é€»è¾‘ - æ¯å¹´ 3.31ã€6.30ã€9.30ã€12.31 æ—¥æ‰§è¡Œæœ´åˆ†æ¸…é›¶
- [x] æ‰‹åŠ¨è¿‡æœŸ API æ¥å£ - `POST /api/admin/point/expire` ç®¡ç†å‘˜æ‰‹åŠ¨è§¦å‘è¿‡æœŸ
- [x] è¿‡æœŸæ—¥æœŸæ£€æŸ¥æ¥å£ - `GET /api/admin/point/expire-check` æ£€æŸ¥å½“å‰æ˜¯å¦ä¸ºè¿‡æœŸæ—¥
- [x] è‡ªåŠ¨å®šæ—¶ä»»åŠ¡ - æ¯å¹´ 4 ä¸ªè¿‡æœŸæ—¥çš„ 23:59 åˆ†è‡ªåŠ¨æ‰§è¡Œæœ´åˆ†è¿‡æœŸ
- [x] è¿‡æœŸè®°å½•ç”Ÿæˆ - åœ¨æœ´åˆ†è®°å½•è¡¨ä¸­åˆ›å»ºè¿‡æœŸç±»å‹è®°å½•
- [x] äº‹åŠ¡å®‰å…¨ä¿éšœ - ä½¿ç”¨æ•°æ®åº“äº‹åŠ¡ç¡®ä¿è¿‡æœŸæ“ä½œçš„æ•°æ®ä¸€è‡´æ€§
- [x] å®Œæ•´æµ‹è¯•éªŒè¯ - æä¾›å®Œæ•´çš„æœ´åˆ†è¿‡æœŸåŠŸèƒ½æµ‹è¯•è„šæœ¬

### âœ… 8. å•†å“å…‘æ¢åŠŸèƒ½ (å·²å®Œæˆ) ğŸ†•

- [x] å…‘æ¢è®°å½•è¡¨æ¨¡å‹ - åˆ›å»º`products_exchanges`è¡¨ï¼Œæ”¯æŒå…‘æ¢è®°å½•ç®¡ç†
- [x] å•†å“æœåŠ¡å®ç° - å®Œæ•´çš„å•†å“å…‘æ¢ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®ç®¡ç†
- [x] å¯å…‘æ¢å•†å“åˆ¸ API - `GET /api/product/exchangeable` è·å–å•†å“åˆ¸åˆ—è¡¨å’Œå¯å…‘æ¢çŠ¶æ€
- [x] å•†å“å…‘æ¢æ¥å£ - `POST /api/product/exchange` å®Œæ•´å…‘æ¢æµç¨‹
- [x] å…‘æ¢è®°å½•æŸ¥è¯¢ - `GET /api/product/exchanges` æ”¯æŒåˆ†é¡µå’ŒçŠ¶æ€ç­›é€‰
- [x] è¿‡æœŸæ—¶é—´ç®¡ç† - æ”¯æŒè‡ªå®šä¹‰æœ‰æ•ˆæœŸï¼ˆé»˜è®¤ 2 å¤©ï¼‰
- [x] å•†å“åˆ¸è¿‡æœŸæ£€æŸ¥åŠŸèƒ½ - è‡ªåŠ¨å®šæ—¶æ£€æŸ¥å’Œæ‰‹åŠ¨ç®¡ç†å‘˜æ£€æŸ¥
- [x] äº‹åŠ¡å®‰å…¨ä¿éšœ - ä½¿ç”¨æ•°æ®åº“äº‹åŠ¡ç¡®ä¿æ•°æ®ä¸€è‡´æ€§
- [x] ä¸‰è¡¨åŒæ­¥æ›´æ–° - ç”¨æˆ·æœ´åˆ†ã€æœ´åˆ†è®°å½•ã€å…‘æ¢è®°å½•åŒæ­¥å¤„ç†
- [x] å®Œæ•´æµ‹è¯•éªŒè¯ - æä¾›å®Œæ•´çš„å•†å“å…‘æ¢åŠŸèƒ½æµ‹è¯•è„šæœ¬

### âœ… 9. ç»„é˜ŸåŠŸèƒ½ (å·²å®Œæˆ) ğŸ†•

- [x] ç»„é˜Ÿæ•°æ®æ¨¡å‹ - åˆ›å»º`teams`å’Œ`team_members`è¡¨ï¼Œæ”¯æŒå®Œæ•´ç»„é˜Ÿç®¡ç†
- [x] ç»„é˜ŸæœåŠ¡å®ç° - å®Œæ•´çš„ç»„é˜Ÿä¸šåŠ¡é€»è¾‘å’ŒçŠ¶æ€ç®¡ç†
- [x] é˜Ÿé•¿åˆ›å»ºç»„é˜Ÿ API - `POST /api/team/create` 8 ä½æ··åˆå­—ç¬¦ç»„é˜Ÿç ç”Ÿæˆ
- [x] é˜Ÿå‘˜åŠ å…¥ç»„é˜Ÿ API - `POST /api/team/join` é€šè¿‡ç»„é˜Ÿç åŠ å…¥ç»„é˜Ÿ
- [x] ç»„é˜ŸçŠ¶æ€æ£€æŸ¥ API - æ£€æŸ¥ç”¨æˆ·æ¯æ—¥åˆ›å»º/å‚ä¸ç»„é˜Ÿé™åˆ¶
- [x] ç»„é˜Ÿè¿‡æœŸç®¡ç† - è‡ªåŠ¨è¿‡æœŸçŠ¶æ€æ›´æ–°ï¼Œ4 å°æ—¶æˆ–å½“å¤©ç»“æŸæ—¶é—´
- [x] ç»„é˜Ÿè¯¦æƒ…æŸ¥è¯¢ - `GET /api/team/:team_code` è·å–å®Œæ•´ç»„é˜Ÿä¿¡æ¯
- [x] ç”¨æˆ·ç»„é˜Ÿè®°å½•æŸ¥è¯¢ - `GET /api/team/records` æ”¯æŒåˆ†é¡µã€è§’è‰²ç­›é€‰ã€çŠ¶æ€ç­›é€‰ã€æ—¶é—´ç­›é€‰
- [x] æ¯æ—¥é™åˆ¶æ£€æŸ¥ - ç”¨æˆ·æ¯æ—¥åªèƒ½åˆ›å»ºä¸€æ¬¡ç»„é˜Ÿæˆ–å‚ä¸ä¸€æ¬¡ç»„é˜Ÿ
- [x] æ—¶é—´ç®¡ç† - ä½¿ç”¨æœ¬æœºæ—¶é—´è¿›è¡Œè¿‡æœŸæ—¶é—´è®¡ç®—å’ŒçŠ¶æ€æ£€æŸ¥
- [x] äº‹åŠ¡å®‰å…¨ä¿éšœ - ä½¿ç”¨æ•°æ®åº“äº‹åŠ¡ç¡®ä¿ç»„é˜Ÿæ“ä½œçš„åŸå­æ€§
- [x] å®Œæ•´æµ‹è¯•éªŒè¯ - æä¾›å®Œæ•´çš„ç»„é˜ŸåŠŸèƒ½æµ‹è¯•è„šæœ¬

### âœ… 10. å›¢é˜Ÿå¥–åŠ±åˆ†å‘åŠŸèƒ½ (å·²å®Œæˆ) ğŸ‰

- [x] æ··åˆå­—ç¬¦å›¢é˜Ÿç  - 8 ä½æ··åˆå­—ç¬¦ç ï¼ˆæ•°å­—+å¤§å°å†™å­—æ¯ï¼‰ï¼Œä¿è¯åŒ…å«æ¯ç§ç±»å‹
- [x] å›¢é˜Ÿæ»¡å‘˜æ£€æµ‹ - è‡ªåŠ¨æ£€æµ‹å›¢é˜Ÿè¾¾åˆ° 4 äººæ—¶è§¦å‘å¥–åŠ±åˆ†å‘
- [x] æœ´åˆ†å¥–åŠ±åˆ†å‘ - é˜Ÿé•¿è·å¾— 70 æœ´åˆ†ï¼Œæ¯ä¸ªé˜Ÿå‘˜è·å¾— 10 æœ´åˆ†
- [x] å¥–åŠ±è®°å½•ç®¡ç† - ä½¿ç”¨ pointUtil åˆ›å»ºè¯¦ç»†çš„æœ´åˆ†å˜åŠ¨è®°å½•
- [x] äº‹åŠ¡å®‰å…¨ä¿éšœ - ç¡®ä¿å¥–åŠ±åˆ†å‘çš„åŸå­æ€§å’Œæ•°æ®ä¸€è‡´æ€§
- [x] API å“åº”å¢å¼º - åŠ å…¥å¥–åŠ±åˆ†å‘ä¿¡æ¯åˆ° API å“åº”ä¸­
- [x] è·¯ç”±éªŒè¯æ›´æ–° - æ”¯æŒæ··åˆå­—ç¬¦å›¢é˜Ÿç çš„æ­£åˆ™è¡¨è¾¾å¼éªŒè¯
- [x] å®Œæ•´æµ‹è¯•éªŒè¯ - æä¾›å®Œæ•´çš„å›¢é˜Ÿå¥–åŠ±åŠŸèƒ½æµ‹è¯•è„šæœ¬

## ğŸŒ API æ¥å£æ¸…å•

### åŸºç¡€ä¿¡æ¯

- **æœåŠ¡åœ°å€**: http://localhost:3000
- **API å‰ç¼€**: /api
- **è®¤è¯æ–¹å¼**: Bearer Token (JWT)

### ç»Ÿä¸€å“åº”æ ¼å¼

```json
{
  "code": 200, // çŠ¶æ€ç ï¼š200æˆåŠŸï¼Œå…¶ä»–ä¸ºé”™è¯¯
  "message": "success", // æ¶ˆæ¯æè¿°
  "data": {} // ä¸šåŠ¡æ•°æ®
}
```

## ğŸ“¡ å·²å®ç° API æ¥å£

### 1. ç”¨æˆ·è®¤è¯æ¥å£ (/api/auth/\*)

| æ¥å£è·¯å¾„                 | æ–¹æ³•   | åŠŸèƒ½æè¿°                           | è®¤è¯éœ€æ±‚      | çŠ¶æ€      |
| ------------------------ | ------ | ---------------------------------- | ------------- | --------- |
| `/api/auth/register`     | POST   | ç”¨æˆ·æ³¨å†Œ                           | âŒ ä¸éœ€è¦     | âœ… å·²å®Œæˆ |
| `/api/auth/login`        | POST   | ç”¨æˆ·ç™»å½•                           | âŒ ä¸éœ€è¦     | âœ… å·²å®Œæˆ |
| `/api/auth/logout`       | POST   | ç”¨æˆ·ç™»å‡º                           | âœ… éœ€è¦ Token | âœ… å·²å®Œæˆ |
| `/api/auth/changepwd`    | POST   | ä¿®æ”¹å¯†ç                            | âœ… éœ€è¦ Token | âœ… å·²å®Œæˆ |
| `/api/auth/delete`       | DELETE | æ³¨é”€è´¦å·                           | âœ… éœ€è¦ Token | âœ… å·²å®Œæˆ |
| `/api/auth/user/profile` | GET    | è·å–ä¸ªäººä¿¡æ¯                       | âœ… éœ€è¦ Token | âœ… å·²å®Œæˆ |
| `/api/auth/user/checkin` | GET    | è·å–ç­¾åˆ°ä¿¡æ¯(ç”¨æˆ·å¯¹åº”ç­¾åˆ°è¡¨çš„ä¿¡æ¯) | âœ… éœ€è¦ Token | âœ… å·²å®Œæˆ |

#### 1.1 ç”¨æˆ·æ³¨å†Œ POST `/api/auth/register`

```javascript
// è¯·æ±‚ä½“
{
  "username": "testuser",      // string, 3-20å­—ç¬¦ï¼Œå¿…å¡«
  "password": "123456",        // string, æœ€å°‘6å­—ç¬¦ï¼Œå¿…å¡«
  "confirmPassword": "123456"  // string, å¿…é¡»ä¸passwordä¸€è‡´ï¼Œå¿…å¡«
}

// å“åº”ä½“
{
  "code": 200,
  "message": "æ³¨å†ŒæˆåŠŸ",
  "data": {
    "userId": 1,
    "username": "testuser",
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  }
}
```

#### 1.2 ç”¨æˆ·ç™»å½• POST `/api/auth/login`

```javascript
// è¯·æ±‚ä½“
{
  "username": "testuser",  // string, å¿…å¡«
  "password": "123456"     // string, å¿…å¡«
}

// å“åº”ä½“
{
  "code": 200,
  "message": "ç™»å½•æˆåŠŸ",
  "data": {
    "userId": 1,
    "username": "testuser",
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "totalPoints": 0
  }
}
```

#### 1.3 ç”¨æˆ·ç™»å‡º POST `/api/auth/logout`

```javascript
// è¯·æ±‚å¤´
Authorization: Bearer <
  token >
  // å“åº”ä½“
  {
    code: 200,
    message: "ç™»å‡ºæˆåŠŸ",
    data: {
      success: true,
    },
  };
```

#### 1.4 ä¿®æ”¹å¯†ç  POST `/api/auth/changepwd`

```javascript
// è¯·æ±‚å¤´
Authorization: Bearer <token>

// è¯·æ±‚ä½“
{
  "oldPassword": "123456",        // string, å¿…å¡«
  "newPassword": "newpass123",    // string, æœ€å°‘6å­—ç¬¦ï¼Œå¿…å¡«
  "confirmPassword": "newpass123" // string, å¿…é¡»ä¸newPasswordä¸€è‡´ï¼Œå¿…å¡«
}

// å“åº”ä½“
{
  "code": 200,
  "message": "å¯†ç ä¿®æ”¹æˆåŠŸ",
  "data": {
    "success": true
  }
}
```

#### 1.5 æ³¨é”€è´¦å· DELETE `/api/auth/delete`

```javascript
// è¯·æ±‚å¤´
Authorization: Bearer <
  token >
  // å“åº”ä½“
  {
    code: 200,
    message: "è´¦å·æ³¨é”€æˆåŠŸ",
    data: {
      success: true,
    },
  };
```

#### 1.6 è·å–ä¸ªäººä¿¡æ¯ GET `/api/auth/user/profile`

```javascript
// è¯·æ±‚å¤´
Authorization: Bearer <
  token >
  // å“åº”ä½“
  {
    code: 200,
    message: "è·å–æˆåŠŸ",
    data: {
      userId: 1,
      username: "testuser",
      totalPoints: 150,
      status: 1,
      lastLoginTime: "2025-09-25T06:40:28.651Z",
      createdAt: "2025-09-25T06:40:28.651Z",
    },
  };
```

#### 1.7 è·å–ç­¾åˆ°ä¿¡æ¯ GET `/api/auth/user/checkin`

```javascript
// è¯·æ±‚å¤´
Authorization: Bearer <
  token >
  // å“åº”ä½“
  {
    code: 200,
    message: "è·å–ç­¾åˆ°ä¿¡æ¯æˆåŠŸ",
    data: {
      user_id: 1,
      cycle_id: 3,
      current_day_of_week: 4,
      week_range: {
        start_date: "2025-09-22",
        end_date: "2025-09-28",
      },
      checkin_data: [
        {
          day_of_week: 1,
          points: 15,
          is_surprise: 0,
          surprise_info: null,
          is_checked_in: 0,
          is_today: false,
        },
        {
          day_of_week: 4,
          points: 20,
          is_surprise: 1,
          surprise_info: {
            type: "coupon",
            coupon_id: 7,
            coupon_name: "ç­¾åˆ°ä¸“äº«15å…ƒåˆ¸",
            coupon_description: "ç­¾åˆ°æƒŠå–œä¸“äº«ï¼Œæ»¡80å…ƒå¯ç”¨ï¼Œæœ‰æ•ˆæœŸ7å¤©",
          },
          is_checked_in: 0,
          is_today: true, // ä»Šå¤©æ˜¯å‘¨å››
        },
        // ... å…¶ä½™å¤©æ•° (day 1-7)
      ],
    },
  };
```

### 2. ç®¡ç†å‘˜æ¥å£ (/api/admin/\*) - ä»…å¼€å‘ç¯å¢ƒ

| æ¥å£è·¯å¾„                        | æ–¹æ³•   | åŠŸèƒ½æè¿°         | çŠ¶æ€      |
| ------------------------------- | ------ | ---------------- | --------- |
| `/api/admin/time`               | POST   | è®¾ç½®ç³»ç»Ÿæ—¶é—´     | âœ… å·²å®Œæˆ |
| `/api/admin/time`               | GET    | è·å–æ—¶é—´çŠ¶æ€     | âœ… å·²å®Œæˆ |
| `/api/admin/time`               | DELETE | é‡ç½®ç³»ç»Ÿæ—¶é—´     | âœ… å·²å®Œæˆ |
| `/api/admin/stats`              | GET    | ç³»ç»Ÿç»Ÿè®¡ä¿¡æ¯     | âœ… å·²å®Œæˆ |
| `/api/admin/info`               | GET    | å¼€å‘ç¯å¢ƒä¿¡æ¯     | âœ… å·²å®Œæˆ |
| `/api/admin/checkin/generate`   | POST   | æ‰‹åŠ¨ç”Ÿæˆç­¾åˆ°é…ç½® | âœ… å·²å®Œæˆ |
| `/api/admin/checkin/cycles`     | GET    | æŸ¥è¯¢ç­¾åˆ°å‘¨æœŸåˆ—è¡¨ | âœ… å·²å®Œæˆ |
| `/api/admin/checkin/current`    | GET    | æŸ¥è¯¢å½“å‰å‘¨é…ç½®   | âœ… å·²å®Œæˆ |
| `/api/admin/checkin/cycles/:id` | GET    | æŸ¥çœ‹é…ç½®è¯¦æƒ…     | âœ… å·²å®Œæˆ |
| `/api/admin/checkin/products`   | GET    | æŸ¥çœ‹å•†å“åˆ¸åˆ—è¡¨   | âœ… å·²å®Œæˆ |

#### 2.1 è®¾ç½®ç³»ç»Ÿæ—¶é—´ POST `/api/admin/time`

```javascript
// è¯·æ±‚ä½“ (ä¸‰ç§æ–¹å¼ä»»é€‰ä¸€ç§)
{
  "timestamp": 1727251200000,           // æ—¶é—´æˆ³
  "dateString": "2025-09-25 10:00:00", // æ—¥æœŸå­—ç¬¦ä¸²
  "fastForwardHours": 24                // å¿«è¿›å°æ—¶æ•°
}

// å“åº”ä½“
{
  "code": 200,
  "message": "ç³»ç»Ÿæ—¶é—´è®¾ç½®æˆåŠŸ",
  "data": {
    "success": true,
    "currentTime": "2025-09-25T02:00:00.000Z",
    "isTimeControlEnabled": true
  }
}
```

#### 2.2 æŸ¥è¯¢å½“å‰å‘¨ç­¾åˆ°é…ç½® GET `/api/admin/checkin/current`

```javascript
// å“åº”ä½“
{
  "success": true,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "week_range": {
      "monday": "2025-09-22",
      "sunday": "2025-09-28"
    },
    "cycles": [
      {
        "id": 1,
        "start_date": "2025-09-22",
        "end_date": "2025-09-28",
        "config": "[{\"day_of_week\":1,\"points\":11,\"is_surprise\":0,\"surprise_info\":null},...7å¤©é…ç½®]",
        "created_at": "2025-09-25 06:40:28.683 +00:00",
        "updated_at": "2025-09-25 06:40:28.683 +00:00"
      }
      // ... æ›´å¤šç­¾åˆ°é…ç½®
    ],
    "count": 5
  }
}
```

#### 2.3 æ‰‹åŠ¨ç”Ÿæˆç­¾åˆ°é…ç½® POST `/api/admin/checkin/generate`

```javascript
// æŸ¥è¯¢å‚æ•° (å¯é€‰)
?date=2025-10-06  // æŒ‡å®šå‘¨çš„ä»»æ„æ—¥æœŸ

// å“åº”ä½“
{
  "success": true,
  "message": "ç­¾åˆ°é…ç½®ç”ŸæˆæˆåŠŸ",
  "data": null
}
```

#### 2.4 æŸ¥çœ‹å•†å“åˆ¸åˆ—è¡¨ GET `/api/admin/checkin/products`

```javascript
// æŸ¥è¯¢å‚æ•° (å¯é€‰)
?status=2  // å•†å“åˆ¸çŠ¶æ€: 2=ç”¨äºç­¾åˆ°, 1=å¯å…‘æ¢, 0=å·²ä¸‹æ¶

// å“åº”ä½“
{
  "success": true,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "products": [
      {
        "id": 5,
        "name": "ç­¾åˆ°ä¸“äº«5å…ƒåˆ¸",
        "description": "ç­¾åˆ°æƒŠå–œä¸“äº«ï¼Œæ»¡25å…ƒå¯ç”¨ï¼Œæœ‰æ•ˆæœŸ7å¤©",
        "points": 40,
        "status": 2
      }
      // ... æ›´å¤šå•†å“åˆ¸
    ],
    "count": 4
  }
}
```

#### 2.5 æ‰‹åŠ¨æ‰§è¡Œæœ´åˆ†è¿‡æœŸ POST `/api/admin/point/expire` ğŸ†•

```javascript
// å“åº”ä½“ï¼ˆæˆåŠŸæ‰§è¡Œè¿‡æœŸï¼‰
{
  "success": true,
  "message": "æœ´åˆ†è¿‡æœŸæ“ä½œå®Œæˆï¼š1ä¸ªç”¨æˆ·ï¼Œå…±è¿‡æœŸ11æœ´åˆ†",
  "data": {
    "expiredUsers": 1,
    "totalExpiredPoints": 11,
    "expireDate": "2025-09-28",
    "details": [
      {
        "userId": 12,
        "username": "test_user",
        "expiredPoints": 11,
        "recordId": 24
      }
    ]
  }
}

// å“åº”ä½“ï¼ˆæ²¡æœ‰ç”¨æˆ·éœ€è¦è¿‡æœŸï¼‰
{
  "success": true,
  "message": "æ²¡æœ‰ç”¨æˆ·éœ€è¦æ‰§è¡Œæœ´åˆ†è¿‡æœŸæ“ä½œ",
  "data": {
    "expiredUsers": 0,
    "totalExpiredPoints": 0
  }
}
```

#### 2.6 æ£€æŸ¥è¿‡æœŸæ—¥æœŸ GET `/api/admin/point/expire-check` ğŸ†•

```javascript
// å“åº”ä½“
{
  "success": true,
  "message": "è·å–æœ´åˆ†è¿‡æœŸæ—¥æœŸæ£€æŸ¥ç»“æœæˆåŠŸ",
  "data": {
    "currentDate": "2025-09-28",
    "currentDateTime": "2025-09-28T07:07:38.255Z",
    "isExpireDate": false,
    "nextExpireDates": [
      "2025-09-30",
      "2025-12-31"
    ]
  }
}
```

### 3. æœ´åˆ†ç›¸å…³æ¥å£ (/api/point/\*) - ğŸ†• æ–°å¢

#### 3.1 ç”¨æˆ·ç­¾åˆ° POST `/api/point/checkin`

```javascript
// è¯·æ±‚å¤´
Authorization: Bearer <token>

// å“åº”ä½“ï¼ˆåŸºç¡€ç­¾åˆ°ï¼‰
{
  "code": 200,
  "message": "ç­¾åˆ°æˆåŠŸ",
  "data": {
    "success": true,
    "basic_points": 15,
    "total_points_earned": 15,
    "surprise_rewards": [],
    "message": "ç­¾åˆ°æˆåŠŸï¼è·å¾—15æœ´åˆ†"
  }
}

// å“åº”ä½“ï¼ˆå«æƒŠå–œå¥–åŠ± - å•†å“åˆ¸ï¼‰
{
  "code": 200,
  "message": "ç­¾åˆ°æˆåŠŸ",
  "data": {
    "success": true,
    "basic_points": 20,
    "total_points_earned": 20,
    "surprise_rewards": [
      {
        "type": "coupon",
        "coupon_id": 7,
        "coupon_name": "ç­¾åˆ°ä¸“äº«15å…ƒåˆ¸",
        "coupon_description": "ç­¾åˆ°æƒŠå–œä¸“äº«ï¼Œæ»¡80å…ƒå¯ç”¨ï¼Œæœ‰æ•ˆæœŸ7å¤©"
      }
    ],
    "message": "ç­¾åˆ°æˆåŠŸï¼è·å¾—20æœ´åˆ†ï¼ŒæƒŠå–œè·å¾—ç­¾åˆ°ä¸“äº«15å…ƒåˆ¸"
  }
}

// å“åº”ä½“ï¼ˆå«æƒŠå–œå¥–åŠ± - æ¦‚ç‡ç“œåˆ†ï¼‰
{
  "code": 200,
  "message": "ç­¾åˆ°æˆåŠŸ",
  "data": {
    "success": true,
    "basic_points": 18,
    "total_points_earned": 68,  // 18 + 50ç“œåˆ†å¥–åŠ±
    "surprise_rewards": [
      {
        "type": "lottery",
        "pool_name": "ç“œåˆ†888æœ´åˆ†",
        "points": 50,
        "message": "æ­å–œè·å¾—50æœ´åˆ†"
      }
    ],
    "message": "ç­¾åˆ°æˆåŠŸï¼è·å¾—18æœ´åˆ†ï¼Œæ­å–œè·å¾—50æœ´åˆ†"
  }
}

// é”™è¯¯å“åº”ï¼ˆé‡å¤ç­¾åˆ°ï¼‰
{
  "code": 400,
  "message": "ä»Šæ—¥å·²ç­¾åˆ°ï¼Œè¯·å‹¿é‡å¤ç­¾åˆ°",
  "data": null
}
```

#### 3.2 è·å–æœ´åˆ†è®°å½• GET `/api/point/records`

```javascript
// è¯·æ±‚å¤´
Authorization: Bearer <token>

// æŸ¥è¯¢å‚æ•°ï¼ˆå¯é€‰ï¼‰
?page=1&limit=20&change_type=checkin&start_date=2025-09-01&end_date=2025-09-30

// å“åº”ä½“
{
  "code": 200,
  "message": "è·å–æœ´åˆ†è®°å½•æˆåŠŸ",
  "data": {
    "records": [
      {
        "id": 1,
        "user_id": 1,
        "change_type": "checkin",
        "related_info": "{\"type\":\"ç­¾åˆ°\",\"description\":\"ç¬¬5å¤©ç­¾åˆ°\",\"day_of_week\":5,\"points\":18}",
        "points": 18,
        "total_points": 68,
        "created_time": "2025-09-26T08:30:15.000Z",
        "created_at": "2025-09-26T08:30:15.000Z",
        "updated_at": "2025-09-26T08:30:15.000Z"
      },
      {
        "id": 2,
        "user_id": 1,
        "change_type": "checkin",
        "related_info": "{\"type\":\"æœ´åˆ†ç“œåˆ†\",\"description\":\"ç­¾åˆ°æƒŠå–œ - ç“œåˆ†888æœ´åˆ†\",\"lottery_type\":\"checkin_surprise\",\"pool_name\":\"ç“œåˆ†888æœ´åˆ†\",\"points\":50,\"message\":\"æ­å–œè·å¾—50æœ´åˆ†\"}",
        "points": 50,
        "total_points": 118,
        "created_time": "2025-09-26T08:30:15.000Z"
      }
    ],
    "total": 2,
    "page": 1,
    "limit": 20,
    "totalPages": 1
  }
}
```

### 4. å•†å“å…‘æ¢æ¥å£ (/api/product/\*) - ğŸ†• æ–°å¢

#### 4.1 è·å–å¯å…‘æ¢å•†å“åˆ¸åˆ—è¡¨ GET `/api/product/exchangeable`

```javascript
// è¯·æ±‚å¤´
Authorization: Bearer <
  token >
  // å“åº”ä½“
  {
    code: 200,
    message: "è·å–å¯å…‘æ¢å•†å“åˆ¸æˆåŠŸ",
    data: {
      products: [
        {
          id: 1,
          name: "1å…ƒä¼˜æƒ åˆ¸",
          description: "æ»¡10å…ƒå¯ç”¨ï¼Œæœ‰æ•ˆæœŸ30å¤©",
          points: 1,
          image_url: null,
          status: 1,
          created_at: "2025-09-25T06:40:28.683Z",
          updated_at: "2025-09-25T06:40:28.683Z",
          exchangeable: true, // ç”¨æˆ·æœ´åˆ†æ˜¯å¦è¶³å¤Ÿå…‘æ¢
          user_points: 14, // ç”¨æˆ·å½“å‰æœ´åˆ†
        },
        {
          id: 2,
          name: "5å…ƒä¼˜æƒ åˆ¸",
          description: "æ»¡30å…ƒå¯ç”¨ï¼Œæœ‰æ•ˆæœŸ30å¤©",
          points: 20,
          image_url: null,
          status: 1,
          created_at: "2025-09-25T06:40:28.683Z",
          updated_at: "2025-09-25T06:40:28.683Z",
          exchangeable: false, // æœ´åˆ†ä¸è¶³
          user_points: 14,
        },
      ],
      user_total_points: 14,
      count: 4,
    },
  };
```

#### 4.2 å…‘æ¢å•†å“åˆ¸ POST `/api/product/exchange`

```javascript
// è¯·æ±‚å¤´
Authorization: Bearer <token>

// è¯·æ±‚ä½“
{
  "product_id": 1  // è¦å…‘æ¢çš„å•†å“ID
}

// å“åº”ä½“ï¼ˆæˆåŠŸï¼‰
{
  "code": 200,
  "message": "å…‘æ¢æˆåŠŸï¼",
  "data": {
    "success": true,
    "exchange": {
      "id": 1,
      "expire_at": "2025-09-30",
      "exchange_time": "2025-09-28T14:19:57.368Z"
    },
    "product": {
      "id": 1,
      "name": "1å…ƒä¼˜æƒ åˆ¸",
      "description": "æ»¡10å…ƒå¯ç”¨ï¼Œæœ‰æ•ˆæœŸ30å¤©",
      "points": 1
    },
    "point_change": {
      "old_points": 14,
      "new_points": 13,
      "cost_points": 1
    }
  }
}

// é”™è¯¯å“åº”ï¼ˆæœ´åˆ†ä¸è¶³ï¼‰
{
  "code": 400,
  "message": "æœ´åˆ†ä½™é¢ä¸è¶³",
  "data": null
}

// é”™è¯¯å“åº”ï¼ˆå•†å“ä¸å­˜åœ¨ï¼‰
{
  "code": 404,
  "message": "å•†å“ä¸å­˜åœ¨",
  "data": null
}
```

#### 4.3 è·å–ç”¨æˆ·å…‘æ¢è®°å½• GET `/api/product/exchanges`

```javascript
// è¯·æ±‚å¤´
Authorization: Bearer <token>

// æŸ¥è¯¢å‚æ•°ï¼ˆå¯é€‰ï¼‰
?page=1&limit=20&status=exchanged

// å“åº”ä½“
{
  "code": 200,
  "message": "è·å–å…‘æ¢è®°å½•æˆåŠŸ",
  "data": {
    "records": [
      {
        "id": 1,
        "user_id": 6,
        "product_id": 1,
        "exchange_time": "2025-09-28T14:19:57.368Z",
        "points": 1,
        "status": "exchanged",
        "expire_at": "2025-09-30",
        "created_at": "2025-09-28T14:19:57.368Z",
        "updated_at": "2025-09-28T14:19:57.368Z",
        "product": {
          "id": 1,
          "name": "1å…ƒä¼˜æƒ åˆ¸",
          "description": "æ»¡10å…ƒå¯ç”¨ï¼Œæœ‰æ•ˆæœŸ30å¤©",
          "image_url": null
        }
      }
    ],
    "total": 1,
    "page": 1,
    "limit": 20,
    "totalPages": 1
  }
}
```

### 5. ç»„é˜ŸåŠŸèƒ½æ¥å£ (/api/team/\*) - ğŸ†• æ–°å¢

#### 5.1 é˜Ÿé•¿åˆ›å»ºç»„é˜Ÿ POST `/api/team/create`

```javascript
// è¯·æ±‚å¤´
Authorization: Bearer <token>

// å“åº”ä½“
{
  "code": 201,
  "message": "ç»„é˜Ÿåˆ›å»ºæˆåŠŸ",
  "data": {
    "id": 1,
    "team_code": "aB3Cd5Ef", // 8ä½æ··åˆå­—ç¬¦ç 
    "captain_id": 1,
    "status": "pending",
    "created_time": "2025-09-29T02:32:36.944Z",
    "expire_time": "2025-09-29T06:32:36.944Z", // 4å°æ—¶è¿‡æœŸ
    "captain_username": "captain123"
  }
}

// é”™è¯¯å“åº”ï¼ˆä»Šæ—¥å·²åˆ›å»ºï¼‰
{
  "code": 400,
  "message": "ä»Šæ—¥å·²åˆ›å»ºç»„é˜Ÿï¼Œæ— æ³•é‡å¤åˆ›å»º",
  "data": null
}
```

#### 5.2 é˜Ÿå‘˜åŠ å…¥ç»„é˜Ÿ POST `/api/team/join`

```javascript
// è¯·æ±‚å¤´
Authorization: Bearer <token>

// è¯·æ±‚ä½“
{
  "team_code": "aB3Cd5Ef"  // 8ä½æ··åˆå­—ç¬¦å›¢é˜Ÿç 
}

// å“åº”ä½“ï¼ˆæ™®é€šåŠ å…¥ï¼‰
{
  "code": 200,
  "message": "åŠ å…¥ç»„é˜ŸæˆåŠŸ",
  "data": {
    "team": {
      "id": 1,
      "team_code": "aB3Cd5Ef",
      "status": "pending",
      "member_count": 3,
      "completed_time": null
    },
    "user": {
      "id": 2,
      "username": "member123",
      "role": "member",
      "join_time": "2025-09-29T02:35:15.123Z"
    }
  }
}

// å“åº”ä½“ï¼ˆå›¢é˜Ÿæ»¡å‘˜ï¼Œè§¦å‘å¥–åŠ±ï¼‰ğŸ‰
{
  "code": 200,
  "message": "ç»„é˜ŸæˆåŠŸå®Œæˆï¼è·å¾—æœ´åˆ†å¥–åŠ±",
  "data": {
    "team": {
      "id": 1,
      "team_code": "aB3Cd5Ef",
      "status": "completed",
      "member_count": 4,
      "completed_time": "2025-09-29T02:39:08.656Z"
    },
    "user": {
      "id": 4,
      "username": "member456",
      "role": "member",
      "join_time": "2025-09-29T02:39:08.656Z"
    },
    "rewards": {
      "captain": {
        "user_id": 1,
        "username": "captain123",
        "points": 70,
        "record_id": 15
      },
      "members": [
        {
          "user_id": 2,
          "username": "member123",
          "points": 10,
          "record_id": 16
        },
        {
          "user_id": 3,
          "username": "member234",
          "points": 10,
          "record_id": 17
        },
        {
          "user_id": 4,
          "username": "member456",
          "points": 10,
          "record_id": 18
        }
      ],
      "total_distributed": 100
    }
  }
}

// é”™è¯¯å“åº”ï¼ˆå›¢é˜Ÿç æ— æ•ˆï¼‰
{
  "code": 400,
  "message": "ç»„é˜Ÿç æ— æ•ˆ",
  "data": null
}
```

#### 5.3 è·å–ç»„é˜Ÿè¯¦æƒ… GET `/api/team/:team_code`

```javascript
// å“åº”ä½“
{
  "code": 200,
  "message": "è·å–ç»„é˜Ÿè¯¦æƒ…æˆåŠŸ",
  "data": {
    "id": 1,
    "team_code": "aB3Cd5Ef",
    "captain": {
      "id": 1,
      "username": "captain123"
    },
    "status": "completed",
    "created_time": "2025-09-29T02:32:36.552Z",
    "expire_time": "2025-09-29T06:32:36.552Z",
    "completed_time": "2025-09-29T02:39:08.656Z",
    "member_count": 4,
    "members": [
      {
        "id": 1,
        "username": "captain123",
        "role": "captain",
        "join_time": "2025-09-29T02:32:36.552Z"
      },
      {
        "id": 2,
        "username": "member123",
        "role": "member",
        "join_time": "2025-09-29T02:35:15.123Z"
      },
      {
        "id": 3,
        "username": "member234",
        "role": "member",
        "join_time": "2025-09-29T02:37:20.456Z"
      },
      {
        "id": 4,
        "username": "member456",
        "role": "member",
        "join_time": "2025-09-29T02:39:08.656Z"
      }
    ]
  }
}
```

#### 5.4 æ£€æŸ¥åˆ›å»ºçŠ¶æ€ GET `/api/team/check-created-today`

```javascript
// è¯·æ±‚å¤´
Authorization: Bearer <token>

// å“åº”ä½“ï¼ˆæœªåˆ›å»ºï¼‰
{
  "code": 200,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "userId": 1,
    "hasCreatedTeamToday": false,
    "teamCode": null,
    "team": null,
    "message": "ä»Šæ—¥æœªåˆ›å»ºç»„é˜Ÿ"
  }
}

// å“åº”ä½“ï¼ˆå·²åˆ›å»ºï¼‰
{
  "code": 200,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "userId": 1,
    "hasCreatedTeamToday": true,
    "teamCode": "6igEkGok",
    "team": {
      "id": 2,
      "team_code": "6igEkGok",
      "captain_id": 4,
      "status": "pending",
      "created_time": "2025-09-29T09:22:27.783Z",
      "expire_time": "2025-09-29T13:22:27.783Z",
      "completed_time": null
    },
    "message": "ä»Šæ—¥å·²åˆ›å»ºç»„é˜Ÿ"
  }
}
```

#### 5.5 æ£€æŸ¥åŠ å…¥çŠ¶æ€ GET `/api/team/check-joined-today`

```javascript
// è¯·æ±‚å¤´
Authorization: Bearer <token>

// å“åº”ä½“ï¼ˆæœªåŠ å…¥ï¼‰
{
  "code": 200,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "userId": 5,
    "hasJoinedTeamToday": false,
    "teamCode": null,
    "team": null,
    "message": "ä»Šæ—¥æœªå‚ä¸ç»„é˜Ÿ"
  }
}

// å“åº”ä½“ï¼ˆå·²åŠ å…¥ï¼‰
{
  "code": 200,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "userId": 5,
    "hasJoinedTeamToday": true,
    "teamCode": "6igEkGok",
    "team": {
      "id": 2,
      "team_code": "6igEkGok",
      "captain_id": 4,
      "status": "pending",
      "created_time": "2025-09-29T09:22:27.783Z",
      "expire_time": "2025-09-29T13:22:27.783Z",
      "completed_time": null
    },
    "message": "ä»Šæ—¥å·²å‚ä¸ç»„é˜Ÿ"
  }
}
```

#### 5.6 è·å–ç”¨æˆ·ç»„é˜Ÿè®°å½• GET `/api/team/records` ğŸ†•

```javascript
// è¯·æ±‚å¤´
Authorization: Bearer <token>

// æŸ¥è¯¢å‚æ•°ï¼ˆå¯é€‰ï¼‰
?page=1&limit=20&status=completed&role=captain&start_date=2025-09-01&end_date=2025-09-30

// å“åº”ä½“
{
  "code": 200,
  "message": "è·å–ç»„é˜Ÿè®°å½•æˆåŠŸ",
  "data": {
    "records": [
      {
        "id": 8,
        "team_code": "nU22zIgu",
        "status": "completed",
        "user_role": "captain",  // ç”¨æˆ·åœ¨è¯¥ç»„é˜Ÿä¸­çš„è§’è‰²
        "created_time": "2025-09-29T16:33:43.483Z",
        "expire_time": "2025-09-29T20:33:43.483Z",
        "completed_time": "2025-09-29T16:33:43.584Z",
        "join_time": null,  // é˜Ÿé•¿ä¸ºnullï¼Œé˜Ÿå‘˜ä¸ºåŠ å…¥æ—¶é—´
        "captain": {
          "id": 19,
          "username": "captain190"
        },
        "member_count": 4,
        "members": [
          {
            "id": 17,
            "team_id": 8,
            "user_id": 19,
            "role": "captain",
            "join_time": "2025-09-29T16:33:43.483Z",
            "user": {
              "id": 19,
              "username": "captain190"
            }
          },
          {
            "id": 18,
            "team_id": 8,
            "user_id": 20,
            "role": "member",
            "join_time": "2025-09-29T16:33:43.527Z",
            "user": {
              "id": 20,
              "username": "member1190"
            }
          }
          // ... æ›´å¤šæˆå‘˜
        ]
      }
      // ... æ›´å¤šç»„é˜Ÿè®°å½•
    ],
    "total": 1,
    "page": 1,
    "limit": 20,
    "totalPages": 1
  }
}
```

**æŸ¥è¯¢å‚æ•°è¯´æ˜ï¼š**

- `page`: é¡µç ï¼ˆé»˜è®¤ 1ï¼‰
- `limit`: æ¯é¡µæ•°é‡ï¼ˆé»˜è®¤ 20ï¼Œæœ€å¤§ 100ï¼‰
- `status`: çŠ¶æ€ç­›é€‰ï¼ˆpending, completed, expiredï¼‰
- `role`: è§’è‰²ç­›é€‰ï¼ˆcaptain, memberï¼‰
- `start_date`: å¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰
- `end_date`: ç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰

### 6. ç³»ç»Ÿæ¥å£

| æ¥å£è·¯å¾„      | æ–¹æ³• | åŠŸèƒ½æè¿° | çŠ¶æ€      |
| ------------- | ---- | -------- | --------- |
| `/api/health` | GET  | å¥åº·æ£€æŸ¥ | âœ… å·²å®Œæˆ |

#### 5.1 å¥åº·æ£€æŸ¥ GET `/api/health`

```javascript
// å“åº”ä½“
{
  "code": 200,
  "message": "PuScore APIæœåŠ¡è¿è¡Œæ­£å¸¸",
  "data": {
    "timestamp": "2025-09-25T06:48:00.031Z",
    "version": "1.0.0",
    "timeControlEnabled": true,
    "environment": "development"
  }
}
```

## ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡

### å·²å®ç°çš„æ•°æ®è¡¨

#### 1. ç”¨æˆ·è¡¨ (users)

```sql
CREATE TABLE users (
    id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
    username TEXT NOT NULL UNIQUE,
    password TEXT NOT NULL,
    total_points INTEGER NOT NULL DEFAULT 0,
    status TINYINT NOT NULL DEFAULT 1,  -- 1:æ­£å¸¸, 0:æ³¨é”€
    last_login_time DATETIME DEFAULT NULL,
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP
);
```

#### 2. å•†å“åˆ¸è¡¨ (products)

```sql
CREATE TABLE products (
    id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
    name TEXT NOT NULL,
    description TEXT DEFAULT NULL,
    points INTEGER NOT NULL CHECK (points > 0),
    image_url TEXT DEFAULT NULL,
    status TINYINT NOT NULL DEFAULT 1,  -- 2:ç”¨äºç­¾åˆ°, 1:å¯å…‘æ¢, 0:å·²ä¸‹æ¶
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP
);
```

#### 3. ç­¾åˆ°å‘¨æœŸè¡¨ (checkin_cycles)

```sql
CREATE TABLE checkin_cycles (
    id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
    start_date DATE NOT NULL,      -- å‘¨ä¸€æ—¥æœŸ
    end_date DATE NOT NULL,        -- å‘¨æ—¥æ—¥æœŸ
    config JSON NOT NULL,          -- 7å¤©ç­¾åˆ°é…ç½®çš„JSONæ•°æ®
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    CHECK (start_date < end_date)
);
```

#### 4. ç”¨æˆ·-ç­¾åˆ°å…³è”è¡¨ (user_checkin_configs)

```sql
CREATE TABLE user_checkin_configs (
    id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
    user_id INTEGER NOT NULL,           -- å…³è”ç”¨æˆ·è¡¨ï¼Œçº§è”åˆ é™¤
    cycle_id INTEGER NOT NULL,          -- å…³è”ç­¾åˆ°å‘¨æœŸè¡¨ï¼Œçº§è”åˆ é™¤
    end_time DATE NOT NULL,             -- ç­¾åˆ°å‘¨æœŸç»“æŸæ—¶é—´(YYYY-MM-DD)
    day1 TINYINT NOT NULL DEFAULT 0,    -- å‘¨ä¸€ç­¾åˆ°çŠ¶æ€(0=æœªç­¾åˆ°,1=å·²ç­¾åˆ°)
    day2 TINYINT NOT NULL DEFAULT 0,    -- å‘¨äºŒç­¾åˆ°çŠ¶æ€
    day3 TINYINT NOT NULL DEFAULT 0,    -- å‘¨ä¸‰ç­¾åˆ°çŠ¶æ€
    day4 TINYINT NOT NULL DEFAULT 0,    -- å‘¨å››ç­¾åˆ°çŠ¶æ€
    day5 TINYINT NOT NULL DEFAULT 0,    -- å‘¨äº”ç­¾åˆ°çŠ¶æ€
    day6 TINYINT NOT NULL DEFAULT 0,    -- å‘¨å…­ç­¾åˆ°çŠ¶æ€
    day7 TINYINT NOT NULL DEFAULT 0,    -- å‘¨æ—¥ç­¾åˆ°çŠ¶æ€
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(user_id, cycle_id),          -- ç”¨æˆ·æ¯ä¸ªå‘¨æœŸåªèƒ½æœ‰ä¸€ä¸ªé…ç½®
    FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE,
    FOREIGN KEY (cycle_id) REFERENCES checkin_cycles (id) ON DELETE CASCADE
);
```

#### 6. å…‘æ¢è®°å½•è¡¨ (products_exchanges) - ğŸ†• æ–°å¢

```sql
CREATE TABLE products_exchanges (
    id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
    user_id INTEGER NOT NULL,                    -- å…³è”ç”¨æˆ·è¡¨ï¼Œçº§è”åˆ é™¤
    product_id INTEGER NOT NULL,                 -- å…³è”å•†å“è¡¨ï¼Œé™åˆ¶åˆ é™¤
    exchange_time DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP, -- å…‘æ¢æ—¶é—´
    points INTEGER NOT NULL CHECK (points > 0), -- å…‘æ¢æ¶ˆè€—çš„æœ´åˆ†
    status TEXT NOT NULL DEFAULT 'exchanged',   -- å…‘æ¢çŠ¶æ€(exchanged, used, expired)
    expire_at DATE DEFAULT NULL,                -- å•†å“åˆ¸è¿‡æœŸæ—¶é—´
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE,
    FOREIGN KEY (product_id) REFERENCES products (id) ON DELETE RESTRICT
);
```

#### 7. å›¢é˜Ÿè¡¨ (teams) - ğŸ†• æ–°å¢

```sql
CREATE TABLE teams (
    id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
    team_code TEXT NOT NULL UNIQUE,             -- 8ä½æ··åˆå­—ç¬¦å›¢é˜Ÿç 
    captain_id INTEGER NOT NULL,                -- å…³è”é˜Ÿé•¿ç”¨æˆ·ï¼Œçº§è”åˆ é™¤
    status TEXT NOT NULL DEFAULT 'pending',     -- å›¢é˜ŸçŠ¶æ€: pending, completed, expired
    created_time DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP, -- åˆ›å»ºæ—¶é—´
    expire_time DATETIME NOT NULL,              -- è¿‡æœŸæ—¶é—´
    completed_time DATETIME DEFAULT NULL,       -- å®Œæˆæ—¶é—´
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (captain_id) REFERENCES users (id) ON DELETE CASCADE
);
```

#### 8. å›¢é˜Ÿæˆå‘˜è¡¨ (team_members) - ğŸ†• æ–°å¢

```sql
CREATE TABLE team_members (
    id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
    team_id INTEGER NOT NULL,                   -- å…³è”å›¢é˜Ÿè¡¨ï¼Œçº§è”åˆ é™¤
    user_id INTEGER NOT NULL,                   -- å…³è”ç”¨æˆ·è¡¨ï¼Œçº§è”åˆ é™¤
    role TEXT NOT NULL DEFAULT 'member',        -- è§’è‰²: captain, member
    join_time DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP, -- åŠ å…¥æ—¶é—´
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(team_id, user_id),                   -- ç”¨æˆ·åœ¨åŒä¸€å›¢é˜Ÿåªèƒ½æœ‰ä¸€ä¸ªè®°å½•
    FOREIGN KEY (team_id) REFERENCES teams (id) ON DELETE CASCADE,
    FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE
);
```

#### 5. æœ´åˆ†è®°å½•è¡¨ (point_records)

```sql
CREATE TABLE point_records (
    id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
    user_id INTEGER NOT NULL,                    -- å…³è”ç”¨æˆ·è¡¨ï¼Œçº§è”åˆ é™¤
    change_type TEXT NOT NULL,                   -- å˜åŠ¨ç±»å‹: checkin, team, exchange, expire
    related_info TEXT DEFAULT NULL,              -- å…³è”ä¸šåŠ¡ä¿¡æ¯JSON
    points INTEGER NOT NULL,                     -- å˜åŠ¨æœ´åˆ†ï¼ˆæ­£æ•°å¢åŠ ï¼Œè´Ÿæ•°å‡å°‘ï¼‰
    total_points INTEGER NOT NULL CHECK (total_points >= 0), -- å˜åŠ¨åæ€»æœ´åˆ†
    created_time DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP, -- å˜åŠ¨æ—¶é—´
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE
);
```

### ç­¾åˆ°é…ç½® JSON æ•°æ®æ ¼å¼

```json
[
  {
    "day_of_week": 1, // æ˜ŸæœŸå‡  (1-7)
    "points": 11, // ç­¾åˆ°è·å¾—æœ´åˆ†
    "is_surprise": 0, // æ˜¯å¦æœ‰æƒŠå–œ (0:å¦, 1:æ˜¯)
    "surprise_info": null // æƒŠå–œè¯¦æƒ… (å•†å“åˆ¸æˆ–ç“œåˆ†å¥–åŠ±)
  },
  {
    "day_of_week": 2,
    "points": 15,
    "is_surprise": 1,
    "surprise_info": {
      "type": "coupon", // æƒŠå–œç±»å‹: coupon=å•†å“åˆ¸, lottery=ç“œåˆ†å¥–åŠ±
      "coupon_id": 6,
      "coupon_name": "ç­¾åˆ°ä¸“äº«8å…ƒåˆ¸",
      "coupon_description": "ç­¾åˆ°æƒŠå–œä¸“äº«ï¼Œæ»¡40å…ƒå¯ç”¨ï¼Œæœ‰æ•ˆæœŸ7å¤©"
    }
  },
  {
    "day_of_week": 3,
    "points": 20,
    "is_surprise": 1,
    "surprise_info": {
      "type": "lottery",
      "pool_name": "ç“œåˆ†888æœ´åˆ†",
      "total_points": 888,
      "probabilities": [
        // æ¦‚ç‡é…ç½®
        { "prob": 0.2, "points": 0, "message": "å¾ˆé—æ†¾ï¼Œæœªä¸­å¥–" },
        { "prob": 0.4, "points": 30, "message": "æ­å–œè·å¾—30æœ´åˆ†" },
        { "prob": 0.01, "points": 888, "message": "æ­å–œè·å¾—å¤§å¥–888æœ´åˆ†ï¼" }
      ]
    }
  }
  // ... day 4-7
]
```

## ğŸ”§ ç³»ç»Ÿé…ç½®

### ç­¾åˆ°é…ç½®æ–‡ä»¶ (config/checkin.js)

```javascript
{
  cycleCount: 5,                    // æ¯å‘¨ç”Ÿæˆ5ä¸ªç­¾åˆ°é…ç½®
  points: { min: 5, max: 25 },      // æœ´åˆ†èŒƒå›´
  surpriseConfig: {
    surpriseDaysRange: { min: 1, max: 3 },  // æƒŠå–œå¤©æ•°1-3å¤©
    rewardTypes: {
      coupon: { weight: 0.6 },      // å•†å“åˆ¸æƒŠå–œæ¦‚ç‡60%
      lottery: { weight: 0.4 }      // ç“œåˆ†å¥–åŠ±æƒŠå–œæ¦‚ç‡40%
    }
  },
  generateTime: { hour: 0, minute: 0 }  // æ¯å‘¨ä¸€00:00è‡ªåŠ¨ç”Ÿæˆ
}
```

### å®šæ—¶ä»»åŠ¡

- **ç­¾åˆ°é…ç½®ç”Ÿæˆ**: æ¯å‘¨ä¸€ 00:00 è‡ªåŠ¨ç”Ÿæˆæ–°ä¸€å‘¨çš„ 5 ä¸ªç­¾åˆ°é…ç½®
- **æ—¶é—´æ§åˆ¶**: æ”¯æŒå¼€å‘ç¯å¢ƒæ—¶é—´è°ƒæ§ï¼Œæ–¹ä¾¿æµ‹è¯•

## ğŸ“Š æµ‹è¯•æ•°æ®

### å•†å“åˆ¸åˆå§‹æ•°æ®

ç³»ç»Ÿè‡ªåŠ¨åˆå§‹åŒ– 9 æ¡å•†å“åˆ¸è®°å½•ï¼š

- **å¯å…‘æ¢å•†å“åˆ¸** (status=1): 5 å…ƒåˆ¸ã€10 å…ƒåˆ¸ã€20 å…ƒåˆ¸ã€å…é‚®åˆ¸
- **ç­¾åˆ°ä¸“ç”¨å•†å“åˆ¸** (status=2): ç­¾åˆ°ä¸“äº« 5 å…ƒåˆ¸ã€8 å…ƒåˆ¸ã€15 å…ƒåˆ¸ã€å…é‚®åˆ¸
- **å·²ä¸‹æ¶å•†å“åˆ¸** (status=0): è¿‡æœŸä¼˜æƒ åˆ¸

### ç­¾åˆ°å‘¨æœŸç¤ºä¾‹

- å½“å‰å‘¨ (2025-09-22 ~ 2025-09-28): å·²ç”Ÿæˆ 5 ä¸ªé…ç½®
- ä¸‹ä¸€å‘¨ (2025-09-29 ~ 2025-10-05): å·²ç”Ÿæˆ 5 ä¸ªé…ç½®
- ä¸‹ä¸‹å‘¨ (2025-10-06 ~ 2025-10-12): å¯é€šè¿‡ API ç”Ÿæˆ

## ğŸ§ª æµ‹è¯•è¯´æ˜

### æµ‹è¯•è„šæœ¬

æä¾›äº†å®Œæ•´çš„ API æµ‹è¯•è„šæœ¬:

- `api_test/test_checkin_system.sh` - ç­¾åˆ°é…ç½®ç³»ç»Ÿæµ‹è¯•
- `api_test/test_user_checkin.sh` - ç”¨æˆ·ç­¾åˆ°ä¿¡æ¯ API æµ‹è¯•
- `api_test/test_checkin_function.sh` - ç”¨æˆ·ç­¾åˆ°æ‰§è¡ŒåŠŸèƒ½å®Œæ•´æµ‹è¯•
- `api_test/test_point_expire.sh` - æœ´åˆ†è¿‡æœŸåŠŸèƒ½å®Œæ•´æµ‹è¯• ğŸ†•
- `api_test/test_product_exchange.sh` - å•†å“å…‘æ¢åŠŸèƒ½å®Œæ•´æµ‹è¯• ğŸ†•
- `api_test/test_team_function_v2.sh` - ç»„é˜ŸåŠŸèƒ½å®Œæ•´æµ‹è¯• ğŸ†•
- `api_test/test_team_rewards_complete.sh` - å›¢é˜Ÿå¥–åŠ±åŠŸèƒ½å®Œæ•´æµ‹è¯• ğŸ‰
- `api_test/test_user_team_records.sh` - ç”¨æˆ·ç»„é˜Ÿè®°å½•åŠŸèƒ½å®Œæ•´æµ‹è¯• ğŸ†•

è¿è¡Œæµ‹è¯•:

```bash
cd /Users/pupu/Desktop/PuScore/server

# æµ‹è¯•ç­¾åˆ°é…ç½®ç³»ç»Ÿ
chmod +x ./api_test/test_checkin_system.sh
./api_test/test_checkin_system.sh

# æµ‹è¯•ç”¨æˆ·ç­¾åˆ°ä¿¡æ¯API
chmod +x ./api_test/test_user_checkin.sh
./api_test/test_user_checkin.sh

# æµ‹è¯•ç”¨æˆ·ç­¾åˆ°æ‰§è¡ŒåŠŸèƒ½ï¼ˆå®Œæ•´æµç¨‹ï¼‰
chmod +x ./api_test/test_checkin_function.sh
./api_test/test_checkin_function.sh

# æµ‹è¯•æœ´åˆ†è¿‡æœŸåŠŸèƒ½ï¼ˆå®Œæ•´æµç¨‹ï¼‰ğŸ†•
chmod +x ./api_test/test_point_expire.sh
./api_test/test_point_expire.sh

# æµ‹è¯•å•†å“å…‘æ¢åŠŸèƒ½ï¼ˆå®Œæ•´æµç¨‹ï¼‰ğŸ†•
chmod +x ./api_test/test_product_exchange.sh
./api_test/test_product_exchange.sh

# æµ‹è¯•ç»„é˜ŸåŠŸèƒ½ï¼ˆå®Œæ•´æµç¨‹ï¼‰ğŸ†•
chmod +x ./api_test/test_team_function_v2.sh
./api_test/test_team_function_v2.sh

# æµ‹è¯•å›¢é˜Ÿå¥–åŠ±åŠŸèƒ½ï¼ˆå®Œæ•´æµç¨‹ï¼‰ğŸ‰
chmod +x ./api_test/test_team_rewards_complete.sh
./api_test/test_team_rewards_complete.sh

# æµ‹è¯•ç”¨æˆ·ç»„é˜Ÿè®°å½•åŠŸèƒ½ï¼ˆå®Œæ•´æµç¨‹ï¼‰ğŸ†•
chmod +x ./api_test/test_user_team_records.sh
./api_test/test_user_team_records.sh
```

### æµ‹è¯•ç»“æœç¤ºä¾‹

**ç­¾åˆ°é…ç½®ç³»ç»Ÿæµ‹è¯•:**

```
ğŸ“¦ æµ‹è¯•1: æŸ¥çœ‹ç”¨äºç­¾åˆ°çš„å•†å“åˆ¸åˆ—è¡¨
âœ… æˆåŠŸè·å– 4 ä¸ªç­¾åˆ°å•†å“åˆ¸

ğŸ“… æµ‹è¯•2: æŸ¥çœ‹å½“å‰å‘¨ç­¾åˆ°é…ç½®
âœ… å½“å‰å‘¨æœŸ: 2025-09-22 åˆ° 2025-09-28
âœ… å…±æœ‰ 5 ä¸ªç­¾åˆ°é…ç½®

ğŸ”§ æµ‹è¯•4: ç”Ÿæˆæ–°çš„ç­¾åˆ°å‘¨æœŸ
âœ… æ–°ç­¾åˆ°å‘¨æœŸç”ŸæˆæˆåŠŸ
```

**ç”¨æˆ·ç­¾åˆ°ä¿¡æ¯ API æµ‹è¯•:**

```
ğŸ“ æ­¥éª¤1: æ³¨å†Œæµ‹è¯•ç”¨æˆ·
âœ… æ³¨å†ŒæˆåŠŸï¼ŒToken: eyJhbGciOiJIUzI1NiIs...

ğŸ“… æ­¥éª¤2: è·å–ç”¨æˆ·ç­¾åˆ°ä¿¡æ¯
âœ… æˆåŠŸè·å–ç­¾åˆ°ä¿¡æ¯ï¼ŒåŒ…å«7å¤©é…ç½®å’Œç­¾åˆ°çŠ¶æ€
âœ… æ­£ç¡®æ ‡è®°ä»Šå¤©æ˜¯å‘¨å›› (is_today: true)
âœ… è‡ªåŠ¨åˆ†é…ç­¾åˆ°é…ç½® (cycle_id: 3)
```

**ç”¨æˆ·ç­¾åˆ°æ‰§è¡ŒåŠŸèƒ½æµ‹è¯•:** ğŸ†•

```
ğŸ¯ PuScore ç”¨æˆ·ç­¾åˆ°åŠŸèƒ½APIæµ‹è¯•
ğŸ“ æ­¥éª¤1: æ³¨å†Œæµ‹è¯•ç”¨æˆ·
âœ… æ³¨å†ŒæˆåŠŸï¼ŒToken: eyJhbGciOiJIUzI1NiIs...

ğŸ“… æ­¥éª¤2: è·å–ç”¨æˆ·ç­¾åˆ°ä¿¡æ¯ï¼ˆè‡ªåŠ¨åˆ†é…ç­¾åˆ°é…ç½®ï¼‰
âœ… æˆåŠŸè·å–ç­¾åˆ°ä¿¡æ¯ï¼Œä»Šå¤©æ˜¯å‘¨5ï¼ŒåŒ…å«æƒŠå–œå¥–åŠ±é…ç½®

âœ… æ­¥éª¤3: æ‰§è¡Œç­¾åˆ°æ“ä½œ
âœ… ç­¾åˆ°æˆåŠŸï¼Œè·å¾—24æœ´åˆ†
âœ… æ¶ˆæ¯ç”Ÿæˆæ­£ç¡®ï¼š"ç­¾åˆ°æˆåŠŸï¼è·å¾—24æœ´åˆ†"

ğŸ“Š æ­¥éª¤4: æŸ¥çœ‹æœ´åˆ†è®°å½•
âœ… æˆåŠŸåˆ›å»ºæœ´åˆ†è®°å½•ï¼Œå…±1æ¡è®°å½•
âœ… è®°å½•åŒ…å«å®Œæ•´ä¿¡æ¯ï¼ˆç”¨æˆ·IDã€å˜åŠ¨ç±»å‹ã€æœ´åˆ†æ•°ã€å…³è”ä¿¡æ¯ç­‰ï¼‰

ğŸ”„ æ­¥éª¤5: æµ‹è¯•é‡å¤ç­¾åˆ°ï¼ˆåº”è¯¥å¤±è´¥ï¼‰
âœ… é‡å¤ç­¾åˆ°è¢«æ­£ç¡®é˜»æ­¢ï¼š"ä»Šæ—¥å·²ç­¾åˆ°ï¼Œè¯·å‹¿é‡å¤ç­¾åˆ°"

ğŸ“ˆ æ­¥éª¤6: æŸ¥çœ‹ç”¨æˆ·ä¸ªäººä¿¡æ¯ï¼ˆéªŒè¯æœ´åˆ†æ›´æ–°ï¼‰
âœ… ç”¨æˆ·æœ´åˆ†æ­£ç¡®æ›´æ–°

ğŸ§ª æ­¥éª¤7: æµ‹è¯•æœ´åˆ†è®°å½•ç­›é€‰åŠŸèƒ½
âœ… æŒ‰ç­¾åˆ°ç±»å‹ç­›é€‰è®°å½•æ­£å¸¸ï¼Œè¿”å›æ­£ç¡®çš„è®°å½•æ•°é‡
```

**å•†å“å…‘æ¢åŠŸèƒ½æµ‹è¯•:** ğŸ†•

```
ğŸ›ï¸ PuScore å•†å“å…‘æ¢åŠŸèƒ½APIæµ‹è¯•
ğŸ“ æ­¥éª¤1: æ³¨å†Œæµ‹è¯•ç”¨æˆ·
âœ… æ³¨å†ŒæˆåŠŸï¼ŒToken: eyJhbGciOiJIUzI1NiIs...

ğŸ¯ æ­¥éª¤2: è·å–ç­¾åˆ°ä¿¡æ¯å¹¶ç­¾åˆ°è·å¾—æœ´åˆ†
âœ… æˆåŠŸè·å–ç­¾åˆ°ä¿¡æ¯å¹¶åˆ†é…ç­¾åˆ°é…ç½®
âœ… ç­¾åˆ°æˆåŠŸï¼Œè·å¾—14æœ´åˆ†

ğŸ‘¤ æ­¥éª¤3: æŸ¥çœ‹ç”¨æˆ·å½“å‰æœ´åˆ†
âœ… ç”¨æˆ·å½“å‰æœ´åˆ†: 14

ğŸ›ï¸ æ­¥éª¤4: è·å–å¯å…‘æ¢å•†å“åˆ¸åˆ—è¡¨
âœ… æˆåŠŸè·å–å¯å…‘æ¢å•†å“åˆ¸åˆ—è¡¨
ğŸ“¦ å¯å…‘æ¢å•†å“åˆ¸æ•°é‡: 4
ğŸ“‹ å•†å“åˆ¸åˆ—è¡¨:
ID: 1, åç§°: 1å…ƒä¼˜æƒ åˆ¸, éœ€è¦æœ´åˆ†: 1, å¯å…‘æ¢: true
ID: 3, åç§°: 10å…ƒä¼˜æƒ åˆ¸, éœ€è¦æœ´åˆ†: 10, å¯å…‘æ¢: true
ID: 2, åç§°: 5å…ƒä¼˜æƒ åˆ¸, éœ€è¦æœ´åˆ†: 20, å¯å…‘æ¢: false
ID: 4, åç§°: å…é‚®åˆ¸, éœ€è¦æœ´åˆ†: 30, å¯å…‘æ¢: false

ğŸ’³ æ­¥éª¤5: å…‘æ¢å•†å“åˆ¸
âœ… å…‘æ¢æˆåŠŸï¼
â° è¿‡æœŸæ—¶é—´: 2025-09-30
ğŸ’° æœ´åˆ†å˜åŒ–: 14 â†’ 13 (æ¶ˆè€— 1 æœ´åˆ†)

ğŸ“œ æ­¥éª¤6: è·å–ç”¨æˆ·å…‘æ¢è®°å½•
âœ… æˆåŠŸè·å–å…‘æ¢è®°å½•
ğŸ“ å…‘æ¢è®°å½•æ€»æ•°: 1
ğŸ“‹ å…‘æ¢è®°å½•è¯¦æƒ…:
å•†å“: 1å…ƒä¼˜æƒ åˆ¸, æ¶ˆè€—æœ´åˆ†: 1, çŠ¶æ€: exchanged

ğŸ‰ å•†å“å…‘æ¢åŠŸèƒ½APIæµ‹è¯•å®Œæˆï¼
```

**å›¢é˜Ÿå¥–åŠ±åŠŸèƒ½æµ‹è¯•:** ğŸ‰

```
ğŸ¯ PuScore å›¢é˜Ÿå¥–åŠ±åŠŸèƒ½ API æµ‹è¯•
ğŸ“ æ­¥éª¤1: æ³¨å†Œæµ‹è¯•ç”¨æˆ·
âœ… æ³¨å†ŒæˆåŠŸï¼ŒToken: eyJhbGciOiJIUzI1NiIs...

ğŸ“… æ­¥éª¤4: é˜Ÿé•¿åˆ›å»ºç»„é˜Ÿ
âœ… å›¢é˜Ÿåˆ›å»ºæˆåŠŸï¼Œå›¢é˜Ÿç : aB3Cd5Ef

ğŸ“‹ æ­¥éª¤5: éªŒè¯å›¢é˜Ÿç æ ¼å¼ï¼ˆæ··åˆå­—ç¬¦ï¼‰
âœ… é•¿åº¦æ­£ç¡®: 8ä½
âœ… åŒ…å«æ•°å­—
âœ… åŒ…å«å¤§å†™å­—æ¯
âœ… åŒ…å«å°å†™å­—æ¯

ğŸ‘¥ æ­¥éª¤6: é˜Ÿå‘˜ä¾æ¬¡åŠ å…¥ç»„é˜Ÿ
âœ… é˜Ÿå‘˜1åŠ å…¥æˆåŠŸ
âœ… é˜Ÿå‘˜2åŠ å…¥æˆåŠŸ
âœ… é˜Ÿå‘˜3åŠ å…¥æˆåŠŸï¼ˆå›¢é˜Ÿæ»¡å‘˜ï¼Œè§¦å‘å¥–åŠ±ï¼‰

ğŸ æ­¥éª¤7: æ£€æŸ¥å¥–åŠ±åˆ†å‘
âœ… å“åº”åŒ…å«å¥–åŠ±ä¿¡æ¯
âœ… å¥–åŠ±åˆ†å‘è¯¦æƒ…:
   - é˜Ÿé•¿è·å¾—70æœ´åˆ†
   - é˜Ÿå‘˜1è·å¾—10æœ´åˆ†
   - é˜Ÿå‘˜2è·å¾—10æœ´åˆ†
   - é˜Ÿå‘˜3è·å¾—10æœ´åˆ†

ğŸ’° æ­¥éª¤8: éªŒè¯ç§¯åˆ†å˜åŒ–
âœ… é˜Ÿé•¿ç§¯åˆ†å¥–åŠ±æ­£ç¡®ï¼ˆ+70ï¼‰
âœ… é˜Ÿå‘˜1ç§¯åˆ†å¥–åŠ±æ­£ç¡®ï¼ˆ+10ï¼‰
âœ… é˜Ÿå‘˜2ç§¯åˆ†å¥–åŠ±æ­£ç¡®ï¼ˆ+10ï¼‰
âœ… é˜Ÿå‘˜3ç§¯åˆ†å¥–åŠ±æ­£ç¡®ï¼ˆ+10ï¼‰

ğŸ“Š å›¢é˜Ÿè¯¦æƒ…:
âœ… å›¢é˜ŸçŠ¶æ€: completed
âœ… å›¢é˜Ÿæˆå‘˜: 4äºº
âœ… å®Œæˆæ—¶é—´: 2025-09-29T02:39:08.656Z

ğŸ‰ å›¢é˜Ÿå¥–åŠ±åŠŸèƒ½APIæµ‹è¯•å®Œæˆï¼
```

**ç”¨æˆ·ç»„é˜Ÿè®°å½•åŠŸèƒ½æµ‹è¯•:** ğŸ†•

```
ğŸ¯ PuScore ç”¨æˆ·ç»„é˜Ÿè®°å½•åŠŸèƒ½APIæµ‹è¯•
ğŸ“ æ­¥éª¤1: æ³¨å†Œæµ‹è¯•ç”¨æˆ·
âœ… é˜Ÿé•¿æ³¨å†ŒæˆåŠŸï¼ŒToken: eyJhbGciOiJIUzI1NiIs...

ğŸ“… æ­¥éª¤3: é˜Ÿé•¿åˆ›å»ºç»„é˜Ÿ
âœ… é˜Ÿé•¿åˆ›å»ºç»„é˜ŸæˆåŠŸï¼Œç»„é˜Ÿç : nU22zIgu

ğŸ‘¥ æ­¥éª¤4: é˜Ÿå‘˜ä¾æ¬¡åŠ å…¥ç»„é˜Ÿ
âœ… é˜Ÿå‘˜1åŠ å…¥æˆåŠŸ
âœ… é˜Ÿå‘˜2åŠ å…¥æˆåŠŸ
âœ… é˜Ÿå‘˜3åŠ å…¥æˆåŠŸï¼ˆè§¦å‘å›¢é˜Ÿå®Œæˆï¼‰

ğŸ“Š æ­¥éª¤5: æµ‹è¯•é˜Ÿé•¿çš„ç»„é˜Ÿè®°å½•
âœ… é˜Ÿé•¿ç»„é˜Ÿè®°å½•æŸ¥è¯¢æˆåŠŸ
ğŸ“ é˜Ÿé•¿ç»„é˜Ÿè®°å½•æ€»æ•°: 1
âœ… é˜Ÿé•¿è®°å½•ä¿¡æ¯æ­£ç¡® - è§’è‰²: captain, çŠ¶æ€: completed, ç»„é˜Ÿç : nU22zIgu

ğŸ“Š æ­¥éª¤6: æµ‹è¯•é˜Ÿå‘˜çš„ç»„é˜Ÿè®°å½•
âœ… é˜Ÿå‘˜ç»„é˜Ÿè®°å½•æŸ¥è¯¢æˆåŠŸ
ğŸ“ é˜Ÿå‘˜ç»„é˜Ÿè®°å½•æ€»æ•°: 1
âœ… é˜Ÿå‘˜è®°å½•ä¿¡æ¯æ­£ç¡® - è§’è‰²: member, çŠ¶æ€: completed, ç»„é˜Ÿç : nU22zIgu

ğŸ” æ­¥éª¤7: æµ‹è¯•æŒ‰è§’è‰²ç­›é€‰ - åªæŸ¥çœ‹é˜Ÿé•¿è®°å½•
âœ… é˜Ÿé•¿è§’è‰²ç­›é€‰æˆåŠŸï¼Œå…± 1 æ¡é˜Ÿé•¿è®°å½•

ğŸ” æ­¥éª¤8: æµ‹è¯•æŒ‰è§’è‰²ç­›é€‰ - åªæŸ¥çœ‹é˜Ÿå‘˜è®°å½•
âœ… é˜Ÿå‘˜è§’è‰²ç­›é€‰æˆåŠŸï¼Œå…± 1 æ¡é˜Ÿå‘˜è®°å½•

ğŸ” æ­¥éª¤9: æµ‹è¯•æŒ‰çŠ¶æ€ç­›é€‰ - åªæŸ¥çœ‹å·²å®Œæˆçš„ç»„é˜Ÿ
âœ… çŠ¶æ€ç­›é€‰æˆåŠŸï¼Œå…± 1 æ¡å·²å®Œæˆè®°å½•

ğŸ“„ æ­¥éª¤10: æµ‹è¯•åˆ†é¡µåŠŸèƒ½
âœ… åˆ†é¡µåŠŸèƒ½æµ‹è¯•æˆåŠŸ
ğŸ“Š åˆ†é¡µä¿¡æ¯ï¼šç¬¬ 1 é¡µï¼Œæ¯é¡µ 1 æ¡ï¼Œæ€»è®¡ 1 æ¡è®°å½•

ğŸ” æ­¥éª¤11: æµ‹è¯•ç»„åˆç­›é€‰ï¼ˆè§’è‰²+çŠ¶æ€ï¼‰
âœ… ç»„åˆç­›é€‰æµ‹è¯•æˆåŠŸï¼Œå…± 1 æ¡è®°å½•ï¼ˆé˜Ÿé•¿ä¸”å·²å®Œæˆï¼‰

ğŸ“… æ­¥éª¤12: æµ‹è¯•æ—¶é—´ç­›é€‰
âœ… æ—¶é—´ç­›é€‰æµ‹è¯•æˆåŠŸï¼Œä»Šæ—¥å…± 0 æ¡è®°å½•

ğŸ‰ ç”¨æˆ·ç»„é˜Ÿè®°å½•APIæµ‹è¯•å®Œæˆï¼
```

## ğŸš€ éƒ¨ç½²ä¿¡æ¯

### ç¯å¢ƒè¦æ±‚

- Node.js >= 16.x
- SQLite 3
- npm >= 8.x

### å¯åŠ¨æœåŠ¡

```bash
cd server
npm install
npm start
```

### ç¯å¢ƒå˜é‡

```bash
PORT=3000                    # æœåŠ¡ç«¯å£
HOST=0.0.0.0                # æœåŠ¡åœ°å€
NODE_ENV=development         # ç¯å¢ƒæ¨¡å¼
JWT_SECRET=your_jwt_secret   # JWTå¯†é’¥
```

## ğŸ“ å¼€å‘è¿›åº¦

### å½“å‰è¿›åº¦: 100%

- âœ… åŸºç¡€æ¶æ„æ­å»º (100%)
- âœ… ç”¨æˆ·è®¤è¯ç³»ç»Ÿ (100%)
- âœ… æ—¶é—´æ§åˆ¶ç³»ç»Ÿ (100%)
- âœ… ç­¾åˆ°é…ç½®ç”Ÿæˆ (100%)
- âœ… ç”¨æˆ·ç­¾åˆ°ä¿¡æ¯ç³»ç»Ÿ (100%)
- âœ… ç”¨æˆ·ç­¾åˆ°æ‰§è¡ŒåŠŸèƒ½ (100%)
- âœ… æœ´åˆ†è¿‡æœŸç®¡ç†åŠŸèƒ½ (100%)
- âœ… å•†å“å…‘æ¢åŠŸèƒ½ (100%)
- âœ… ç»„é˜ŸåŠŸèƒ½ (100%)
- âœ… å›¢é˜Ÿå¥–åŠ±åˆ†å‘åŠŸèƒ½ (100%) ğŸ‰

### ä¸‹ä¸€æ­¥è®¡åˆ’

1. âœ… ~~å®ç°ç”¨æˆ·ç­¾åˆ°æ‰§è¡ŒåŠŸèƒ½ - å®é™…ç­¾åˆ°æ“ä½œã€æœ´åˆ†å¢åŠ ã€æƒŠå–œå¥–åŠ±å¤„ç†~~ **å·²å®Œæˆ**
2. âœ… ~~å®ç°æœ´åˆ†è¿‡æœŸç®¡ç†åŠŸèƒ½ - å®šæ—¶è¿‡æœŸã€æ‰‹åŠ¨è¿‡æœŸã€è¿‡æœŸè®°å½•~~ **å·²å®Œæˆ**
3. âœ… ~~å®Œæˆæœ´åˆ†å…‘æ¢å’Œè®°å½•ç³»ç»Ÿ - å•†å“åˆ¸å…‘æ¢ã€å…‘æ¢è®°å½•ç®¡ç†~~ **å·²å®Œæˆ**
4. âœ… ~~å¼€å‘ç»„é˜Ÿåˆ›å»ºå’ŒåŠ å…¥åŠŸèƒ½~~ **å·²å®Œæˆ**
5. âœ… ~~å¼€å‘ç»„é˜Ÿæœ´åˆ†ç“œåˆ†åŠŸèƒ½~~ **å·²å®Œæˆ** ğŸ‰
6. å‰ç«¯ç•Œé¢å¼€å‘

### ğŸ“ æœ€æ–°å®ŒæˆåŠŸèƒ½ (2025-09-30)

**ç”¨æˆ·ç»„é˜Ÿè®°å½•æŸ¥è¯¢åŠŸèƒ½** ğŸ†•ï¼š

- âœ… ç”¨æˆ·ç»„é˜Ÿè®°å½• API - `GET /api/team/records` è·å–ç”¨æˆ·å†å²ç»„é˜Ÿè®°å½•
- âœ… å¤šç»´åº¦ç­›é€‰æ”¯æŒ - æ”¯æŒæŒ‰è§’è‰²ï¼ˆé˜Ÿé•¿/é˜Ÿå‘˜ï¼‰ã€çŠ¶æ€ï¼ˆpending/completed/expiredï¼‰ç­›é€‰
- âœ… æ—¶é—´èŒƒå›´ç­›é€‰ - æ”¯æŒæŒ‰åˆ›å»ºæ—¥æœŸèŒƒå›´æŸ¥è¯¢ç»„é˜Ÿè®°å½•
- âœ… åˆ†é¡µæŸ¥è¯¢åŠŸèƒ½ - æ”¯æŒåˆ†é¡µå‚æ•°ï¼Œé»˜è®¤æ¯é¡µ 20 æ¡ï¼Œæœ€å¤§ 100 æ¡
- âœ… ç»„åˆç­›é€‰åŠŸèƒ½ - æ”¯æŒå¤šæ¡ä»¶ç»„åˆç­›é€‰ï¼Œå¦‚è§’è‰²+çŠ¶æ€+æ—¶é—´èŒƒå›´
- âœ… å®Œæ•´æ•°æ®è¿”å› - åŒ…å«ç»„é˜Ÿè¯¦æƒ…ã€æˆå‘˜ä¿¡æ¯ã€ç”¨æˆ·è§’è‰²ç­‰å®Œæ•´æ•°æ®
- âœ… è·¯ç”±ä¼˜åŒ–å¤„ç† - è§£å†³è·¯ç”±å†²çªé—®é¢˜ï¼Œç¡®ä¿ API æ­£ç¡®è®¿é—®
- âœ… å®Œæ•´æµ‹è¯•éªŒè¯ - æä¾› 12 ä¸ªæµ‹è¯•æ­¥éª¤çš„å®Œæ•´åŠŸèƒ½æµ‹è¯•è„šæœ¬

**å›¢é˜Ÿå¥–åŠ±åˆ†å‘åŠŸèƒ½**ï¼š

- âœ… æ··åˆå­—ç¬¦å›¢é˜Ÿç ç”Ÿæˆ - 8 ä½æ··åˆå­—ç¬¦ï¼ˆæ•°å­—+å¤§å°å†™å­—æ¯ï¼‰
- âœ… å›¢é˜Ÿæ»¡å‘˜è‡ªåŠ¨æ£€æµ‹ - å½“å›¢é˜Ÿè¾¾åˆ° 4 äººæ—¶è‡ªåŠ¨è§¦å‘å¥–åŠ±
- âœ… æœ´åˆ†å¥–åŠ±åˆ†å‘è§„åˆ™ - é˜Ÿé•¿è·å¾— 70 æœ´åˆ†ï¼Œé˜Ÿå‘˜å„è·å¾— 10 æœ´åˆ†
- âœ… å¥–åŠ±è®°å½•å®Œæ•´ç®¡ç† - ä½¿ç”¨ pointUtil åˆ›å»ºè¯¦ç»†çš„æœ´åˆ†å˜åŠ¨è®°å½•
- âœ… API å“åº”å¢å¼º - åŠ å…¥å®Œæ•´çš„å¥–åŠ±åˆ†å‘ä¿¡æ¯åˆ° API å“åº”ä¸­
- âœ… è·¯ç”±éªŒè¯æ›´æ–° - æ”¯æŒæ··åˆå­—ç¬¦å›¢é˜Ÿç çš„æ­£åˆ™è¡¨è¾¾å¼éªŒè¯
- âœ… äº‹åŠ¡å®‰å…¨ä¿éšœ - ç¡®ä¿å¥–åŠ±åˆ†å‘çš„åŸå­æ€§å’Œæ•°æ®ä¸€è‡´æ€§
- âœ… å®Œæ•´æµ‹è¯•éªŒè¯ - æä¾›å®Œæ•´çš„å›¢é˜Ÿå¥–åŠ±åŠŸèƒ½æµ‹è¯•è„šæœ¬

**ç»„é˜ŸåŠŸèƒ½**ï¼š

- âœ… ç»„é˜Ÿæ•°æ®æ¨¡å‹åˆ›å»º (Team & TeamMember)
- âœ… å®Œæ•´çš„ç»„é˜ŸæœåŠ¡å®ç° (teamService)
- âœ… é˜Ÿé•¿åˆ›å»ºç»„é˜Ÿ API - 8 ä½å”¯ä¸€ç»„é˜Ÿç ç”Ÿæˆ
- âœ… é˜Ÿå‘˜åŠ å…¥ç»„é˜Ÿ API - ç»„é˜Ÿç éªŒè¯å’Œè‡ªåŠ¨å®Œæˆ
- âœ… ç»„é˜ŸçŠ¶æ€æ£€æŸ¥ API - æ¯æ—¥åˆ›å»º/å‚ä¸é™åˆ¶æ£€æŸ¥
- âœ… ç»„é˜Ÿè¿‡æœŸç®¡ç† - 4 å°æ—¶æˆ–å½“å¤©ç»“æŸæ—¶é—´è®¡ç®—
- âœ… ç»„é˜Ÿè¯¦æƒ…æŸ¥è¯¢ API - å®Œæ•´æˆå‘˜ä¿¡æ¯å±•ç¤º
- âœ… ç”¨æˆ·ç»„é˜Ÿè®°å½•æŸ¥è¯¢ API - æ”¯æŒå¤šç»´åº¦ç­›é€‰å’Œåˆ†é¡µæŸ¥è¯¢
- âœ… ä½¿ç”¨æœ¬æœºæ—¶é—´è¿›è¡ŒçŠ¶æ€ç®¡ç†
- âœ… æ•°æ®åº“äº‹åŠ¡å®‰å…¨ä¿éšœ
- âœ… å®Œæ•´çš„ API æµ‹è¯•è„šæœ¬å’ŒéªŒè¯

**æŠ€æœ¯äº®ç‚¹**ï¼š

- æ··åˆå­—ç¬¦å›¢é˜Ÿç ï¼š8 ä½æ··åˆå­—ç¬¦ç ï¼ˆæ•°å­—+å¤§å°å†™å­—æ¯ï¼‰ç”Ÿæˆç®—æ³•ï¼Œä¿è¯åŒ…å«æ¯ç§å­—ç¬¦ç±»å‹
- è‡ªåŠ¨å¥–åŠ±åˆ†å‘æœºåˆ¶ï¼šå›¢é˜Ÿè¾¾åˆ° 4 äººæ—¶è‡ªåŠ¨è§¦å‘ï¼Œé˜Ÿé•¿ 70 æœ´åˆ†ï¼Œé˜Ÿå‘˜å„ 10 æœ´åˆ†
- å®Œæ•´çš„å¥–åŠ±è®°å½•ï¼šæ‰€æœ‰å¥–åŠ±å˜åŠ¨ä½¿ç”¨ createPointRecord ç»Ÿä¸€ç®¡ç†
- äº‹åŠ¡å®‰å…¨ä¿éšœï¼šç¡®ä¿å›¢é˜Ÿåˆ›å»ºã€åŠ å…¥ã€å¥–åŠ±åˆ†å‘çš„åŸå­æ€§æ“ä½œ
- API å“åº”å¢å¼ºï¼šè¿”å›å®Œæ•´çš„å¥–åŠ±åˆ†å‘è¯¦æƒ…ï¼Œä¾¿äºå‰ç«¯å±•ç¤º
- è·¯ç”±éªŒè¯å‡çº§ï¼šæ”¯æŒæ··åˆå­—ç¬¦å›¢é˜Ÿç çš„æ­£åˆ™è¡¨è¾¾å¼éªŒè¯ `^[a-zA-Z0-9]{8}$`
- æ—¶é—´æœåŠ¡é›†æˆï¼šç»Ÿä¸€ä½¿ç”¨ timeService.now() è·å–æ—¶é—´ï¼Œæ”¯æŒå¼€å‘ç¯å¢ƒæ—¶é—´æ§åˆ¶

---

**æœ€åæ›´æ–°**: 2025-09-30  
**é¡¹ç›®çŠ¶æ€**: å¼€å‘ä¸­ - ç”¨æˆ·ç»„é˜Ÿè®°å½•åŠŸèƒ½å·²å®Œæˆ ï¿½  
**å®Œæˆåº¦**: 100% (æ ¸å¿ƒåŠŸèƒ½)  
**è”ç³»æ–¹å¼**: å¼€å‘å›¢é˜Ÿ
